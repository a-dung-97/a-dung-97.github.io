(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50691819"],{"005c":function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"h",(function(){return s})),r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return d}));var a=r("b775");function n(t){return Object(a["a"])({url:"/tasks",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/tasks",method:"post",data:t})}function i(t,e){return Object(a["a"])({url:"/tasks/".concat(t),method:"get",params:e})}function s(t,e){return Object(a["a"])({url:"/tasks/".concat(e),method:"put",data:t})}function c(t){return Object(a["a"])({url:"/tasks/".concat(t),method:"delete"})}function l(t,e,r){return Object(a["a"])({url:"/tasks/".concat(e,"/").concat(r),method:"post",data:t})}function u(t,e,r){return Object(a["a"])({url:"/tasks/".concat(e,"/").concat(r),method:"get",params:t})}function d(t){return Object(a["a"])({url:"/tasks/".concat(t,"/finish"),method:"put"})}},3699:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return c}));var a=r("b775");function n(t){return Object(a["a"])({url:"/leads",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"/leads/".concat(t),method:"get",params:e})}function i(t){return Object(a["a"])({url:"/leads",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/leads/".concat(e),method:"put",data:t})}function c(t,e){return Object(a["a"])({url:"/leads/convert/".concat(e),method:"post",data:t})}},"4a49":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return c}));var a=r("b775");function n(t){return Object(a["a"])({url:"/customers",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"/customers/".concat(t),method:"get",params:e})}function i(t){return Object(a["a"])({url:"/customers",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/customers/".concat(e),method:"put",data:t})}function c(t,e,r){return Object(a["a"])({url:"/customers/".concat(t,"/").concat(e),method:"get",params:r})}},"658b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("TaskDetail",{attrs:{"is-edit":!1}})],1)},n=[],o=r("a02a"),i={components:{TaskDetail:o["a"]}},s=i,c=r("2877"),l=Object(c["a"])(s,a,n,!1,null,null,null);e["default"]=l.exports},"856f":function(t,e,r){"use strict";r.d(e,"d",(function(){return n})),r.d(e,"f",(function(){return o})),r.d(e,"e",(function(){return i})),r.d(e,"g",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return u}));var a=r("b775");function n(t){return Object(a["a"])({url:"/opportunities",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/opportunities",method:"post",data:t})}function i(t,e){return Object(a["a"])({url:"/opportunities/".concat(t),method:"get",params:e})}function s(t,e){return Object(a["a"])({url:"/opportunities/".concat(e),method:"put",data:t})}function c(t){return Object(a["a"])({url:"/opportunities/".concat(t),method:"delete"})}function l(t,e){return Object(a["a"])({url:"/opportunities/".concat(t,"/orders"),method:"get",params:e})}function u(t,e){return Object(a["a"])({url:"/opportunities/".concat(t,"/quotes"),method:"get",params:e})}},a02a:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"Xin vui lòng chờ","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[r("el-col",{attrs:{span:24}},[t.isEdit?r("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:t.updateTask}},[t._v("Cập nhật")]):r("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:t.createTask}},[t._v("Thêm công việc")])],1),t._v(" "),r("el-form",{ref:"form",attrs:{disabled:t.isShow,model:t.form,rules:t.rules,"label-position":"left","label-width":"150px"}},[r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Thông tin công việc")])]),t._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"user_id"}},[r("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.userOptions,(function(e){return r("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Tiêu đề",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Đối tượng"}},[r("el-input",{ref:"input",attrs:{placeholder:"App\\Lead"==t.form.taskable_type?"Chọn tiềm năng":"Chọn khách hàng"},on:{focus:function(e){return t.openDialog("obj")}},model:{value:t.obj,callback:function(e){t.obj=e},expression:"obj"}},[r("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend"},on:{change:function(e){t.form.taskable_id="",t.obj="",t.contact="",t.form.contact_id="",t.form.opportunity_id="",t.opportunity=""}},slot:"prepend",model:{value:t.form.taskable_type,callback:function(e){t.$set(t.form,"taskable_type",e)},expression:"form.taskable_type"}},[r("el-option",{attrs:{label:"Tiềm năng",value:"App\\Lead"}}),t._v(" "),r("el-option",{attrs:{label:"Khách hàng",value:"App\\Customer"}})],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Liên hệ"}},[r("el-input",{ref:"input1",attrs:{disabled:"App\\Lead"==t.form.taskable_type,clearable:"",placeholder:"Chọn liên hệ"},on:{focus:function(e){return t.openDialog("contact")},clear:function(e){t.form.contact_id=""}},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Nhắc nhở"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.reminder,callback:function(e){t.reminder=e},expression:"reminder"}})],1),t._v(" "),t.reminder?[r("el-form-item",{attrs:{label:"Ngày nhắc"}},[r("el-date-picker",{attrs:{type:"datetime",format:"dd/MM/yyyy HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.reminder_time,callback:function(e){t.$set(t.form,"reminder_time",e)},expression:"form.reminder_time"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Kiểu nhắc"}},[r("el-radio",{attrs:{label:"1"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Email")]),t._v(" "),r("el-radio",{attrs:{label:"2"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Thông báo")]),t._v(" "),r("el-radio",{attrs:{label:"3"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Cả hai")])],1)]:t._e()],2),t._v(" "),r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Cơ hội"}},[r("el-input",{ref:"input2",attrs:{disabled:"App\\Lead"==t.form.taskable_type,clearable:"",placeholder:"Chọn cơ hội"},on:{focus:function(e){t.showDialog1=!0},clear:function(e){t.form.opportunity_id=""}},model:{value:t.opportunity,callback:function(e){t.opportunity=e},expression:"opportunity"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Ngày bắt đầu"}},[r("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày bắt đầu",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Ngày hết hạn"}},[r("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày hết hạn",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.form.expiration_date,callback:function(e){t.$set(t.form,"expiration_date",e)},expression:"form.expiration_date"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Độ ưu tiên"}},[r("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn độ ưu tiên"},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}},[r("el-option",{attrs:{value:"1",label:"Thấp nhất"}}),t._v(" "),r("el-option",{attrs:{value:"2",label:"Thấp"}}),t._v(" "),r("el-option",{attrs:{value:"3",label:"Bình thường"}}),t._v(" "),r("el-option",{attrs:{value:"4",label:"Cao"}}),t._v(" "),r("el-option",{attrs:{value:"5",label:"Cao nhất"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Trạng thái"}},[r("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn trạng thái"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[r("el-option",{attrs:{value:"1",label:"Chưa thực hiện"}}),t._v(" "),r("el-option",{attrs:{value:"2",label:"Đang thực hiện"}}),t._v(" "),r("el-option",{attrs:{value:"3",label:"Đã giải quyết"}}),t._v(" "),r("el-option",{attrs:{value:"4",label:"Đã hoàn thành"}})],1)],1)],1)],1)],1)],1),t._v(" "),r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[t._v("Thông tin mô tả")]),t._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),t._v(" "),r("SelectCustomer",{attrs:{customer:t.form.taskable_id,type:t.type,"show-dialog":t.showDialog},on:{"handle-select":t.handleSelect,"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}}),t._v(" "),r("SelectOpportunity",{attrs:{"show-dialog":t.showDialog1,customer:t.form.taskable_id},on:{"handle-select":t.handleSelectOp,"update:showDialog":function(e){t.showDialog1=e},"update:show-dialog":function(e){t.showDialog1=e}}})],1)},n=[],o=(r("96cf"),r("3b8d")),i=(r("7f7f"),r("005c")),s=(r("c103"),r("e875")),c=r("5d63"),l={props:["isEdit","isShow"],components:{SelectCustomer:c["a"],SelectOpportunity:s["a"]},watch:{reminder:function(t){var e=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),r=e+" "+(new Date).toLocaleTimeString("en-GB");t?this.isEdit&&this.data.reminder_time?(this.form.reminder_type=this.data.reminder_type,this.form.reminder_time=this.data.reminder_time):(this.form.reminder_type="1",this.form.reminder_time=r):(this.form.reminder_type="",this.form.reminder_time="")}},data:function(){return{contact:"",opportunity:"",showDialog:!1,showDialog1:!1,obj:"",dialogFormVisible:!1,reminder:!1,form:{id:"",user_id:"",title:"",taskable_type:"App\\Lead",taskable_id:"",start_date:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),expiration_date:"",priority:"",status:"",reminder_time:"",reminder_type:"",description:"",contact_id:"",opportunity_id:""},loading:"",rules:{user_id:[{required:!0,message:"Bạn chưa chọn chủ sở hữu",trigger:"blur"}],title:[{required:!0,message:"Bạn chưa chọn tiêu đề",trigger:"blur"}]},data:"",type:""}},methods:{handleSelectOp:function(t){this.form.opportunity_id=t.id,this.opportunity=t.name},openDialog:function(t){this.type="obj"==t?this.form.taskable_type:"App\\Contact",this.showDialog=!0,this.$refs["input"].blur(),this.$refs["input1"].blur()},createTask:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,""==this.form.taskable_id&&(this.form.taskable_type=""),t.next=7,Object(i["g"])(this.form);case 7:e=t.sent,r=e.data,this.loading=!1,this.$router.push("/business/task/show/".concat(r.id)),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),getTask:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(i["f"])(this.$route.params.id,{edit:!0});case 4:for(a in e=t.sent,r=e.data,r.finish_date&&this.$router.push("/404"),this.data=r,this.contact=r.contact,this.obj=r.taskable,r.reminder_type&&(this.reminder=!0),this.form)this.form[a]=r[a];r.taskable_type||(this.form.taskable_type="App\\Lead"),this.loading=!1,console.log(r),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 21:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),updateTask:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$refs["form"].validate();case 4:return t.next=6,Object(i["h"])(this.form,this.$route.params.id);case 6:t.sent,this.loading=!1,this.$router.push("/business/task/show/".concat(this.$route.params.id)),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),handleSelect:function(t){"App\\Lead"==this.type||"App\\Customer"==this.type?(this.obj=t.name,this.form.taskable_id=t.id,this.contact="",this.form.contact_id=""):(this.contact=t.name,this.form.contact_id=t.id)}},created:function(){this.getUsers(),this.isEdit&&this.getTask()}},u=l,d=r("2877"),m=Object(d["a"])(u,a,n,!1,null,null,null);e["a"]=m.exports},dd64:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return s}));var a=r("b775");function n(t){return Object(a["a"])({url:"/contacts",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"/contacts/".concat(t),method:"get",params:e})}function i(t){return Object(a["a"])({url:"/contacts",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/contacts/".concat(e),method:"put",data:t})}}}]);