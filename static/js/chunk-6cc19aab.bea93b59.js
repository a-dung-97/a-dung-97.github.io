(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cc19aab"],{"0baa":function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return s}));var n=r("b775");function o(t,e){return Object(n["a"])({url:"/tags/".concat(e),method:"delete",data:t})}function a(t,e){return Object(n["a"])({url:"/tags/".concat(e),method:"put",data:t})}function i(t,e){return Object(n["a"])({url:"/tags",method:"get",params:{type:t,name:e}})}function s(t,e){return Object(n["a"])({url:"/tags/".concat(t,"/").concat(e),method:"get"})}},1320:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",[r("el-col",{attrs:{span:24}},[t.isEdit?r("el-button",{staticClass:"fr",attrs:{type:"success"},on:{click:t.updateInvoice}},[t._v("Cập nhật")]):r("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:t.createInvoice}},[t._v("Lưu")])],1),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"170px"}},[r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Thông tin hóa đơn")])]),t._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{md:12,sm:24}},[r("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"ownerable_id"}},[r("el-row",[r("el-col",{attrs:{span:7}},[r("el-select",{on:{change:function(e){t.form.ownerable_id=""}},model:{value:t.form.ownerable_type,callback:function(e){t.$set(t.form,"ownerable_type",e)},expression:"form.ownerable_type"}},[r("el-option",{attrs:{value:"App\\User",label:"Nhân viên"}}),t._v(" "),r("el-option",{attrs:{value:"App\\Group",label:"Nhóm"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:17}},[r("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:t.form.ownerable_id,callback:function(e){t.$set(t.form,"ownerable_id",e)},expression:"form.ownerable_id"}},["App\\User"==t.form.ownerable_type?t._l(t.userOptions,(function(e){return r("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})):t._l(t.groupOptions,(function(e){return r("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{disabled:0==e.count,label:e.name,value:e.id}},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.count+" nhân viên"))])])}))],2)],1)],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Mã hóa đơn"}},[r("el-input",{attrs:{placeholder:"Nhập mã hóa đơn"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Đơn hàng",prop:"order_id"}},[r("el-input",{ref:"input",attrs:{clearable:"",placeholder:"Chọn đơn hàng"},on:{focus:t.openDialog,clear:function(e){t.form.customer=""}},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Khách hàng"}},[r("el-input",{attrs:{disabled:""},model:{value:t.form.customer,callback:function(e){t.$set(t.form,"customer",e)},expression:"form.customer"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Ngày hết hạn"}},[r("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày hết hạn",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.form.expiration_date,callback:function(e){t.$set(t.form,"expiration_date",e)},expression:"form.expiration_date"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Số tiền thanh toán",prop:"payment_amount"}},[r("el-input",{attrs:{type:"number",min:"0",placeholder:"Nhập số tiền thanh toán"},model:{value:t.form.payment_amount,callback:function(e){t.$set(t.form,"payment_amount",e)},expression:"form.payment_amount"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Hình thức thanh toán",prop:"payment_method"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"Chọn hình thức thanh toán"},model:{value:t.form.payment_method,callback:function(e){t.$set(t.form,"payment_method",e)},expression:"form.payment_method"}},[r("el-option",{attrs:{label:"Tiền mặt",value:"Tiền mặt"}}),t._v(" "),r("el-option",{attrs:{label:"Chuyển khoản",value:"Chuyển khoản"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Mã số thuế"}},[r("el-input",{staticClass:"w-100",attrs:{placeholder:"Nhập mã số thuế"},model:{value:t.form.tax_code,callback:function(e){t.$set(t.form,"tax_code",e)},expression:"form.tax_code"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"Người phụ trách",prop:"user_id"}},[r("el-select",{staticClass:"w-100",attrs:{size:"small",clearable:"",placeholder:"Chọn người phụ trách"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.userOptions,(function(e){return r("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[r("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Trạng thái"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn trạng thái"},model:{value:t.form.type_id,callback:function(e){t.$set(t.form,"type_id",e)},expression:"form.type_id"}},t._l(t.catalogs["Trạng thái"],(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1)],1),t._v(" "),r("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[t._v("Ghi chú")]),t._v(" "),r("el-input",{attrs:{type:"textarea"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),r("SelectOrderQuote",{attrs:{type:"order","show-dialog":t.showDialog},on:{"handle-select":t.handleSelect,"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)],1)},o=[],a=(r("ac6a"),r("5df3"),r("7f7f"),r("96cf"),r("3b8d")),i=r("948b"),s=r("ccd6"),c=r("f201d"),l={props:["isEdit","ord"],components:{TagArea:s["a"],SelectOrderQuote:c["a"]},data:function(){return{order:"",showDialog:!1,form:{id:"",ownerable_type:"App\\User",ownerable_id:"",code:"",order_id:"",customer:"",expiration_date:"",status_id:"",payment_method:"",payment_amount:"",tax_code:"",user_id:"",note:""},rules:{ownerable_id:[{required:!0,message:"Hãy chọn chủ sở hữu",trigger:"blur"}],code:[{required:!0,message:"Hãy nhập mã hóa đơn",trigger:"blur"}],order_id:[{required:!0,message:"Hãy chọn đơn hàng"}],user_id:[{required:!0,message:"Hãy chọn người phụ trách"}],payment_method:[{required:!0,message:"Hãy chọn hình thức thanh toán",trigger:"blur"}],payment_amount:[{required:!0,message:"Hãy nhập số tiền thanh toán",trigger:"blur"}]},catalogs:{"Kiểu":[],"Nguồn":[],"Trạng thái":[]}}},methods:{openDialog:function(){this.showDialog=!0,this.$refs["input"].blur()},handleSelect:function(t){this.order=t.code,this.form.customer=t.customer,this.form.order_id=t.id},createInvoice:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.openFullScreen(),t.next=6,Object(i["d"])(this.form);case 6:e=t.sent,r=e.data,this.closeFullScreen(),this.ord?this.$router.go(-1):this.$router.push("/accounting/invoice/show/".concat(r.id)),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),t.t0.response&&this.closeFullScreen();case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),getInvoice:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.openFullScreen(),t.next=4,Object(i["c"])(this.$route.params.id,{edit:!0});case 4:for(n in e=t.sent,r=e.data,this.order=r.order,this.form)this.form[n]=r[n];this.closeFullScreen(),console.log(r),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),updateInvoice:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.openFullScreen(),t.next=4,this.$refs["form"].validate();case 4:return t.next=6,Object(i["e"])(this.form,this.$route.params.id);case 6:t.sent,this.closeFullScreen(),this.$router.push("/accounting/invoice/show/".concat(this.$route.params.id)),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.ord&&(this.order=this.ord.code,this.form.order_id=this.ord.id,this.form.customer=this.ord.customer.name,this.form.payment_amount=this.ord.total),Promise.all([this.getCatalog("Hóa đơn","Trạng thái"),this.getUsers(),this.getGroups()]),this.isEdit&&this.getInvoice()}},u=l,d=r("2877"),h=Object(d["a"])(u,n,o,!1,null,null,null);e["a"]=h.exports},"5df3":function(t,e,r){"use strict";var n=r("02f4")(!0);r("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},"7f83":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("InvoiceDetail",{attrs:{"is-edit":!0}})],1)},o=[],a=r("1320"),i={components:{InvoiceDetail:a["a"]}},s=i,c=r("2877"),l=Object(c["a"])(s,n,o,!1,null,null,null);e["default"]=l.exports},"948b":function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return c}));var n=r("b775");function o(t){return Object(n["a"])({url:"/invoices",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/invoices",method:"post",data:t})}function i(t,e){return Object(n["a"])({url:"/invoices/".concat(t),method:"get",params:e})}function s(t,e){return Object(n["a"])({url:"/invoices/".concat(e),method:"put",data:t})}function c(t){return Object(n["a"])({url:"/invoices/".concat(t),method:"delete"})}},a9e6:function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return a})),r.d(e,"f",(function(){return i})),r.d(e,"g",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l})),r.d(e,"d",(function(){return u}));var n=r("b775");function o(t){return Object(n["a"])({url:"/quotes",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/quotes/".concat(t),method:"get"})}function i(t){return Object(n["a"])({url:"/quotes",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"/quotes/".concat(e),method:"put",data:t})}function c(t){return Object(n["a"])({url:"/quotes/".concat(t),method:"delete"})}function l(t){return Object(n["a"])({url:"/quotes/".concat(t,"/order"),method:"get"})}function u(t){return Object(n["a"])({url:"/quotes/".concat(t,"/send"),method:"get"})}},b946:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return l}));var n=r("b775");function o(t){return Object(n["a"])({url:"/orders",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/orders/".concat(t),method:"get"})}function i(t){return Object(n["a"])({url:"/orders",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"/orders/".concat(e),method:"put",data:t})}function c(t){return Object(n["a"])({url:"/orders/".concat(t,"/invoice"),method:"get"})}function l(t){return Object(n["a"])({url:"/orders/".concat(t,"/send"),method:"get"})}}}]);