(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-582c383b"],{"0baa":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return i}));var r=a("b775");function n(e,t){return Object(r["a"])({url:"/tags/".concat(t),method:"delete",data:e})}function o(e,t){return Object(r["a"])({url:"/tags/".concat(t),method:"put",data:e})}function l(e,t){return Object(r["a"])({url:"/tags",method:"get",params:{type:e,name:t}})}function i(e,t){return Object(r["a"])({url:"/tags/".concat(e,"/").concat(t),method:"get"})}},3699:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return s}));var r=a("b775");function n(e){return Object(r["a"])({url:"/leads",method:"get",params:e})}function o(e,t){return Object(r["a"])({url:"/leads/".concat(e),method:"get",params:t})}function l(e){return Object(r["a"])({url:"/leads",method:"post",data:e})}function i(e,t){return Object(r["a"])({url:"/leads/".concat(t),method:"put",data:e})}function s(e,t){return Object(r["a"])({url:"/leads/convert/".concat(t),method:"post",data:e})}},"4a49":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return s}));var r=a("b775");function n(e){return Object(r["a"])({url:"/customers",method:"get",params:e})}function o(e,t){return Object(r["a"])({url:"/customers/".concat(e),method:"get",params:t})}function l(e){return Object(r["a"])({url:"/customers",method:"post",data:e})}function i(e,t){return Object(r["a"])({url:"/customers/".concat(t),method:"put",data:e})}function s(e,t,a){return Object(r["a"])({url:"/customers/".concat(e,"/").concat(t),method:"get",params:a})}},"5df3":function(e,t,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=r(t,a),this._i+=e.length,{value:e,done:!1})}))},"84c7":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"Xin vui lòng chờ","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-col",{attrs:{span:24}},[e.isEdit?a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"success"},on:{click:e.updateContact}},[e._v("Cập nhật")]):a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:e.createContact}},[e._v("Lưu")])],1),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"150px"}},[a("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Thông tin liên hệ")])]),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{md:12,sm:24}},[a("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"ownerable_id"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-select",{on:{change:function(t){e.form.ownerable_id=""}},model:{value:e.form.ownerable_type,callback:function(t){e.$set(e.form,"ownerable_type",t)},expression:"form.ownerable_type"}},[a("el-option",{attrs:{value:"App\\User",label:"Nhân viên"}}),e._v(" "),a("el-option",{attrs:{value:"App\\Group",label:"Nhóm"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:e.form.ownerable_id,callback:function(t){e.$set(e.form,"ownerable_id",t)},expression:"form.ownerable_id"}},["App\\User"==e.form.ownerable_type?e._l(e.userOptions,(function(t){return a("el-option",{key:t.id,staticStyle:{"max-height":"100%"},attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.email))])])})):e._l(e.groupOptions,(function(t){return a("el-option",{key:t.id,staticStyle:{"max-height":"100%"},attrs:{disabled:0==t.count,label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.count+" nhân viên"))])])}))],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Họ tên đệm"}},[a("el-input",{attrs:{placeholder:"Nhập họ tên đệm"},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:"Chọn"},slot:"prepend",model:{value:e.form.honorific,callback:function(t){e.$set(e.form,"honorific",t)},expression:"form.honorific"}},[a("el-option",{attrs:{label:"Ông",value:"Ông"}}),e._v(" "),a("el-option",{attrs:{label:"Bà",value:"Bà"}}),e._v(" "),a("el-option",{attrs:{label:"Anh",value:"Anh"}}),e._v(" "),a("el-option",{attrs:{label:"Chị",value:"Chị"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Số điện thoại",prop:"phone_number"}},[a("el-input",{attrs:{placeholder:"Nhập số điện thoại"},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Số di động",prop:"mobile_number"}},[a("el-input",{attrs:{placeholder:"Nhập số di động"},model:{value:e.form.mobile_number,callback:function(t){e.$set(e.form,"mobile_number",t)},expression:"form.mobile_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Fax",prop:"fax"}},[a("el-input",{attrs:{placeholder:"Nhập số fax"},model:{value:e.form.fax,callback:function(t){e.$set(e.form,"fax",t)},expression:"form.fax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Sinh nhật"}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày sinh",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Liên hệ chính"}},[a("el-switch",{model:{value:e.form.primary,callback:function(t){e.$set(e.form,"primary",t)},expression:"form.primary"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"customer_id",label:"Khách hàng"}},[a("el-input",{ref:"input",attrs:{clearable:"",placeholder:"Chọn khách hàng"},on:{focus:e.openDialog,clear:function(t){e.form.customer_id=""}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Tên",prop:"last_name"}},[a("el-input",{attrs:{placeholder:"Nhập tên"},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Skype"}},[a("el-input",{attrs:{placeholder:"Nhập số Skype"},model:{value:e.form.skype,callback:function(t){e.$set(e.form,"skype",t)},expression:"form.skype"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Facebook"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ Facebook"},model:{value:e.form.facebook,callback:function(t){e.$set(e.form,"facebook",t)},expression:"form.facebook"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Địa chỉ văn phòng"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ văn phòng"},model:{value:e.form.office_address,callback:function(t){e.$set(e.form,"office_address",t)},expression:"form.office_address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Phòng ban"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn phòng ban"},model:{value:e.form.department_id,callback:function(t){e.$set(e.form,"department_id",t)},expression:"form.department_id"}},e._l(e.catalogs["Phòng ban"],(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Chức vụ"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn chức vụ"},model:{value:e.form.position_id,callback:function(t){e.$set(e.form,"position_id",t)},expression:"form.position_id"}},e._l(e.catalogs["Chức vụ"],(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Giới tính"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn giới tính",clearable:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-option",{attrs:{value:1,label:"Nam"}}),e._v(" "),a("el-option",{attrs:{value:0,label:"Nữ"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("Thông tin mô tả")]),e._v(" "),a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),a("SelectCustomer",{attrs:{type:"App\\Customer","show-dialog":e.showDialog},on:{"handle-select":e.handleSelect,"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t}}})],1)],1)},n=[],o=(a("ac6a"),a("5df3"),a("96cf"),a("3b8d")),l=(a("7f7f"),a("dd64")),i=a("61f7"),s=a("ccd6"),c=(a("47af"),a("5d63")),u={props:["isEdit","user"],components:{TagArea:s["a"],SelectCustomer:c["a"]},data:function(){return{showDialog:!1,name:"",form:{id:"",ownerable_type:"App\\User",ownerable_id:"",email:"",first_name:"",honorific:"",last_name:"",mobile_number:"",phone_number:"",fax:"",birthday:"",primary:!1,customer_id:"",skype:"",facebook:"",office_address:"",department_id:"",position_id:"",gender:"",description:""},loading:"",rules:{ownerable_id:[{required:!0,message:"Hãy chọn chủ sở hữu"}],customer_id:[{required:!0,message:"Hãy chọn khách hàng"}],last_name:[{required:!0,message:"Hãy nhập tên tiềm năng",trigger:"blur"}],email:[{type:"email",message:"Bạn hãy nhập một địa chỉ email",trigger:"blur"}],phone_number:[{validator:i["e"],trigger:"blur"}],mobile_number:[{validator:i["d"],trigger:"blur"}],fax:[{validator:i["e"],trigger:"blur"}]},catalogs:{"Phòng ban":[],"Chức vụ":[]}}},methods:{handleSelect:function(e){this.name=e.name,this.form.customer_id=e.id},openDialog:function(){this.showDialog=!0,this.$refs["input"].blur()},createContact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,e.next=6,Object(l["c"])(this.form);case 6:t=e.sent,a=t.data,this.loading=!1,this.$router.push("/customer/contact/show/".concat(a.id)),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),getContact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(l["b"])(this.$route.params.id,{edit:!0});case 4:for(r in t=e.sent,a=t.data,this.name=a.customer,this.form)this.form[r]=a[r];this.loading=!1,console.log(a),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),this.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),updateContact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$refs["form"].validate();case 4:return e.next=6,Object(l["d"])(this.form,this.$route.params.id);case 6:e.sent,this.loading=!1,this.$router.push("/customer/contact/show/".concat(this.$route.params.id)),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),this.loading=!1;case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.user&&(this.form.customer_id=this.user.id,this.name=this.user.name),Promise.all([this.getCatalog("Liên hệ","Phòng ban"),this.getCatalog("Liên hệ","Chức vụ"),this.getUsers(),this.getGroups()]),this.isEdit&&this.getContact()}},m=u,d=a("2877"),f=Object(d["a"])(m,r,n,!1,null,null,null);t["a"]=f.exports},"9ef73":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("ContactDetail",{attrs:{user:e.user,"is-edit":!1}})],1)},n=[],o=a("84c7"),l={props:["user"],components:{ContactDetail:o["a"]}},i=l,s=a("2877"),c=Object(s["a"])(i,r,n,!1,null,null,null);t["default"]=c.exports},dd64:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return i}));var r=a("b775");function n(e){return Object(r["a"])({url:"/contacts",method:"get",params:e})}function o(e,t){return Object(r["a"])({url:"/contacts/".concat(e),method:"get",params:t})}function l(e){return Object(r["a"])({url:"/contacts",method:"post",data:e})}function i(e,t){return Object(r["a"])({url:"/contacts/".concat(t),method:"put",data:e})}}}]);