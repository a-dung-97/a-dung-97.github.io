(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c90b3a2"],{"0baa":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return o}));var n=a("b775");function r(t,e){return Object(n["a"])({url:"/tags/".concat(e),method:"delete",data:t})}function s(t,e){return Object(n["a"])({url:"/tags/".concat(e),method:"put",data:t})}function i(t,e){return Object(n["a"])({url:"/tags",method:"get",params:{type:t,name:e}})}function o(t,e){return Object(n["a"])({url:"/tags/".concat(t,"/").concat(e),method:"get"})}},"102e":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"g",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return u}));var n=a("b775");function r(t){return Object(n["a"])({url:"/mailing-lists",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/mailing-lists/".concat(t),method:"get"})}function i(t){return Object(n["a"])({url:"/mailing-lists",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/mailing-lists/".concat(e),method:"put",data:t})}function l(t){return Object(n["a"])({url:"/mailing-lists/".concat(t),method:"delete"})}function c(t){return Object(n["a"])({url:"/mailing-lists/members",method:"post",data:t})}function u(t,e){return Object(n["a"])({url:"/mailing-lists/".concat(e,"/members"),method:"delete",data:t})}},1709:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{disabled:!0,type:"primary",size:"small"}},[t._v("Xóa")]),t._v(" "),a("el-button",{attrs:{disabled:t.isSelecting,type:"primary",size:"small"},on:{click:function(e){t.showMailingListDialog=!0}}},[t._v("Danh sách email")]),t._v(" "),a("el-button",{attrs:{disabled:!0,type:"primary",size:"small"}},[t._v("Xuất Excel")]),t._v(" "),a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.$router.push("/customer/customer/create")}}}),t._v(" "),a("ChangingTag",{attrs:{objs:t.selected,type:"customer"}})],1)],1),t._v(" "),a("SearchForm",{attrs:{params:t.params},on:{"handle-search":t.getData}}),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{"table-data":t.tableData,loading:t.loading},on:{"update:loading":function(e){t.loading=e},"selection-change":t.handleSelectionChange}}),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)],1),t._v(" "),a("MailingList",{attrs:{members:t.selected,"show-dialog":t.showMailingListDialog,type:"customer"},on:{"update:showDialog":function(e){t.showMailingListDialog=e},"update:show-dialog":function(e){t.showMailingListDialog=e}}})],1)},r=[],s=(a("96cf"),a("3b8d")),i=a("4a49"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"58vh",data:t.tableData,border:""},on:{"selection-change":function(e){return t.$emit("selection-change",e)}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",width:"110",fixed:"",label:"Mã"}}),t._v(" "),a("el-table-column",{attrs:{width:"200",fixed:"",label:"Tên"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link",attrs:{tag:"a",to:"/customer/customer/show/"+e.row.id}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"email",width:"250",label:"Email"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone_number",width:"120",label:"Số điện thoại"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile_number",width:"120",label:"Số di động"}}),t._v(" "),a("el-table-column",{attrs:{width:"100",label:"Sinh nhật"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.birthday)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"owner",width:"200",label:"Chủ sở hữu"}}),t._v(" "),a("el-table-column",{attrs:{prop:"office_address",width:"200",label:"Địa chỉ văn phòng"}}),t._v(" "),a("el-table-column",{attrs:{width:"150",label:"Ngày tạo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.created_at)))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",width:"150",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.$router.push("/customer/customer/edit/"+e.row.id)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""}})]}}])})],1)},l=[],c={props:["tableData","loading"],methods:{}},u=c,d=a("2877"),p=Object(d["a"])(u,o,l,!1,null,null,null),m=p.exports,h=a("333d"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-row",{staticClass:"mb-10",attrs:{gutter:10}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{size:"medium",placeholder:"Nhập thông tin",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("handle-search")}},model:{value:t.params.search,callback:function(e){t.$set(t.params,"search",e)},expression:"params.search"}})],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium",clearable:"",placeholder:"Nguồn"},model:{value:t.params.source,callback:function(e){t.$set(t.params,"source",e)},expression:"params.source"}},t._l(t.catalogs["Nguồn"],(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"medium",clearable:"",placeholder:"Ngành nghề"},model:{value:t.params.branch,callback:function(e){t.$set(t.params,"branch",e)},expression:"params.branch"}},t._l(t.catalogs["Ngành nghề"],(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{staticClass:"w-100",attrs:{multiple:"",filterable:"",size:"medium",clearable:"",remote:"","reserve-keyword":"",placeholder:"Tag","remote-method":t.remoteMethod,loading:t.loading},model:{value:t.params.tags,callback:function(e){t.$set(t.params,"tags",e)},expression:"params.tags"}},t._l(t.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{staticClass:"w-100",attrs:{size:"medium",clearable:""},on:{change:function(e){t.params.ownerableId=""}},model:{value:t.params.ownerableType,callback:function(e){t.$set(t.params,"ownerableType",e)},expression:"params.ownerableType"}},[a("el-option",{attrs:{label:"Nhân viên",value:"App\\User"}}),t._v(" "),a("el-option",{attrs:{label:"Nhóm",value:"App\\Group"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-select",{staticClass:"w-100",attrs:{disabled:""==t.params.ownerableType,size:"medium",clearable:"",placeholder:"Chủ sở hữu"},model:{value:t.params.ownerableId,callback:function(e){t.$set(t.params,"ownerableId",e)},expression:"params.ownerableId"}},["App\\User"==t.params.ownerableType?t._l(t.userOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):t._l(t.groupOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],2)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticClass:"w-100",attrs:{size:"medium",type:"daterange","start-placeholder":"Tạo từ","end-placeholder":"Tạo đến",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.params.createdAt,callback:function(e){t.$set(t.params,"createdAt",e)},expression:"params.createdAt"}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-date-picker",{staticClass:"w-100",attrs:{size:"medium",type:"daterange","start-placeholder":"Sinh nhật từ","end-placeholder":"Sinh nhật đến",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.params.birthday,callback:function(e){t.$set(t.params,"birthday",e)},expression:"params.birthday"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",icon:"el-icon-search",circle:"",type:"primary"},on:{click:function(e){return t.$emit("handle-search")}}})],1)],1)},b=[],f=(a("ac6a"),a("5df3"),a("0baa")),v={props:["params"],data:function(){return{catalogs:{"Nguồn":[],"Ngành nghề":[]},options:"",loading:!1}},methods:{remoteMethod:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e){t.next=10;break}return this.loading=!0,t.next=4,Object(f["d"])("customer",e);case 4:a=t.sent,n=a.data,this.options=n,this.loading=!1,t.next=11;break;case 10:this.options=[];case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){Promise.all([this.getCatalog("Tiềm năng","Nguồn"),this.getCatalog("Tiềm năng","Ngành nghề"),this.getUsers(),this.getGroups()])}},w=v,y=Object(d["a"])(w,g,b,!1,null,null,null),_=y.exports,k=a("6d67"),x=a("c767"),j=a("4875"),O={components:{TableData:m,Pagination:h["a"],SearchForm:_,MailingList:k["a"],ChangingTag:j["a"]},mixins:[x["a"]],data:function(){return{tableData:[],loading:!1,pagination:{},params:{perPage:10,page:1,search:"",source:"",branch:"",ownerable:"",createdAt:"",tags:"",birthday:"",ownerableType:"",ownerableId:""}}},methods:{getData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(i["b"])(this.params);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getData()}},C=O,S=Object(d["a"])(C,n,r,!1,null,null,null);e["default"]=S.exports},4875:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticStyle:{"margin-left":"10px"}},[a("el-dropdown",{attrs:{size:"small",disabled:"","split-button":"",trigger:"click",type:"primary"},on:{command:t.handleCommand}},[t._v("\n        Tag\n        "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{disabled:0==t.objs.length,command:!0}},[t._v("Thêm tag")]),t._v(" "),a("el-dropdown-item",{attrs:{disabled:0==t.objs.length,command:!1}},[t._v("Xóa tag")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.isCreating?"Thêm tag":"Xóa tag",visible:t.showDialog,"before-close":function(){return t.tag=[]},width:"30%"},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-select",{staticClass:"w-100",attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"","remote-method":t.remoteMethod,"allow-create":t.isCreating,placeholder:"Chọn tag",loading:t.loading},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}},t._l(t.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.showDialog=!1}}},[t._v("Hủy")]),t._v(" "),t.isCreating?a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.changeTags}},[t._v("Thêm")]):a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:t.deleteTags}},[t._v("Xóa")])],1)],1)],1)},r=[],s=(a("96cf"),a("3b8d")),i=a("0baa"),o={props:["type","objs"],data:function(){return{tags:[],options:[],showDialog:!1,title:"",loading:!1,isCreating:!0}},methods:{handleCommand:function(t){this.isCreating=t,this.title=this.showDialog=!0},remoteMethod:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e){t.next=10;break}return this.loading=!0,t.next=4,Object(i["d"])(this.type,e);case 4:a=t.sent,n=a.data,this.options=n,this.loading=!1,t.next=11;break;case 10:this.options=[];case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),deleteTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$confirm("Bạn có muốn xóa các tag này");case 3:return this.openFullScreen(),t.next=6,Object(i["b"])({tags:this.tags,objects:this.objs.map((function(t){return t.id}))},this.type);case 6:this.showDialog=!1,this.$message.success("Xóa tag thành công"),this.closeFullScreen(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.openFullScreen(),t.next=4,Object(i["a"])({tags:this.tags,objects:this.objs.map((function(t){return t.id}))},this.type);case 4:this.closeFullScreen(),this.showDialog=!1,this.$message.success("Thêm tag thành công"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null);e["a"]=u.exports},"4a49":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return l}));var n=a("b775");function r(t){return Object(n["a"])({url:"/customers",method:"get",params:t})}function s(t,e){return Object(n["a"])({url:"/customers/".concat(t),method:"get",params:e})}function i(t){return Object(n["a"])({url:"/customers",method:"post",data:t})}function o(t,e){return Object(n["a"])({url:"/customers/".concat(e),method:"put",data:t})}function l(t,e,a){return Object(n["a"])({url:"/customers/".concat(t,"/").concat(e),method:"get",params:a})}},"5df3":function(t,e,a){"use strict";var n=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=n(e,a),this._i+=t.length,{value:t,done:!1})}))},c767:function(t,e,a){"use strict";a("7f7f");var n=a("75fc");e["a"]={data:function(){return{selected:[],showMailingListDialog:!1,isSelecting:!0}},methods:{handleSelectionChange:function(t){this.isSelecting=!t.length>0,this.selected=Object(n["a"])(t.filter((function(t){return t.email})).map((function(t){return{id:t.id,name:t.name,email:t.email}})))}}}}}]);