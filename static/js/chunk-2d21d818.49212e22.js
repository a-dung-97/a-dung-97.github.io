(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d818"],{d21e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"app-container",attrs:{"element-loading-text":"Xin vui lòng chờ","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-tabs",{staticStyle:{"max-height":"calc(100vh - 50px)"},attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"Khách hàng"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Khách hàng"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Liên hệ"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Liên hệ"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Cơ hội"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Cơ hội"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Hóa đơn"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Hóa đơn"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Tiềm năng"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Tiềm năng"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Đơn hàng"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Đơn hàng"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-create":function(e){return t.showDialogForm("create",e)},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Báo giá"}},[t.tableData.length>0?a("TableData",{attrs:{form:t.form,"table-data":t.catalog["Báo giá"],loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-delete":function(e){return t.getData()},"handle-create":function(e){return t.showDialogForm("create",e)},"update:loading":function(e){t.loading=e}}}):t._e()],1)],1),t._v(" "),a("DialogForm",{attrs:{"show-dialog":t.showDialog,editing:t.editing,form:t.form},on:{reload:t.getData,"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],o=(a("7f7f"),a("7514"),a("96cf"),a("3b8d")),r=a("47af"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"row-key":"id",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"Tên danh mục","min-width":"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"Mô tả","min-width":"280"}}),t._v(" "),a("el-table-column",{attrs:{label:"Hành động",align:"center","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isParrentId(e.row.id)?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Thêm",placement:"top"}},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(a){return t.handleCreate(e.row.id)}}})],1):[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Chỉnh sửa",placement:"top"}},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.handleEdit(e.row)}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Xóa",placement:"top"}},[a("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}})],1)]]}}])})],1)},c=[],s={props:["tableData","form"],methods:{handleEdit:function(t){this.form.id=t.id,this.form.name=t.name,this.form.description=t.description,this.form.parent_id=t.parent_id,this.$emit("handle-edit")},handleDelete:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(r["a"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),isParrentId:function(t){return-1!=this.tableData.map((function(t){return t.id})).indexOf(t)},handleCreate:function(t){this.$emit("handle-create",t)}}},d=s,u=a("2877"),h=Object(u["a"])(d,l,c,!1,null,null,null),g=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",center:"",title:this.editing?"Chỉnh sửa danh mục":"Thêm danh mục","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"Tên",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Mô tả",prop:"description"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.editing?a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.updateData}},[t._v("Cập nhật")]):a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1)],1)},m=[],p={props:["form","editing","showDialog"],data:function(){return{loading:!1,rules:{name:[{required:!0,message:"Hãy nhập tên danh mục",trigger:"blur"}]}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},updateData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(r["e"])(this.form,this.form.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),createData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(r["d"])(this.form);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success(this.editing?"Cập nhật thành công":"Thêm mới thành công"),this.closeDialog(),this.$emit("reload")}}},b=p,D=Object(u["a"])(b,f,m,!1,null,null,null),w=D.exports,v={components:{TableData:g,DialogForm:w},data:function(){return{tableData:[],loading:!1,catalog:{"Liên hệ":[],"Cơ hội":[],"Hóa đơn":[],"Tiềm năng":[],"Đơn hàng":[],"Báo giá":[],"Khách hàng":[]},showDialog:!1,editing:!1,form:{name:"",description:"",parent_id:""}}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(r["b"])();case 4:for(n in e=t.sent,this.tableData=e.data,this.loading=!1,a=function(t){i.catalog[t]=i.tableData.find((function(e){return e.name==t})).children},this.catalog)a(n);t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("edit"==t)this.editing=!0;else{for(var a in this.form)this.form[a]="";this.form.parent_id=e,this.editing=!1}this.showDialog=!0}},created:function(){this.getData()}},_=v,x=Object(u["a"])(_,n,i,!1,null,null,null);e["default"]=x.exports}}]);