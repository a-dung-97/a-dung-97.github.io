(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13db51b8"],{"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"53ae":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return s}));var r=n("b775");function a(t){return Object(r["a"])({url:"/positions",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/positions",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"/positions/".concat(e),method:"put",data:t})}function l(t){return Object(r["a"])({url:"/positions/".concat(t),method:"delete"})}function s(){return Object(r["a"])({url:"/positions/recursive",method:"get"})}},"5d73":function(t,e,n){t.exports=n("469f")},"5df3":function(t,e,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},"768b":function(t,e,n){"use strict";var r=n("a745"),a=n.n(r);function i(t){if(a()(t))return t}var o=n("5d73"),l=n.n(o),s=n("c8bb"),c=n.n(s);function u(t,e){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=l()(t);!(r=(o=s.next()).done);r=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){a=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(a)throw i}}return n}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(t,e){return i(t)||u(t,e)||d()}n.d(e,"a",(function(){return p}))},"7d7b":function(t,e,n){var r=n("e4ae"),a=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},e95d:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticClass:"mb-20"},[n("SearchForm",{attrs:{params:t.params},on:{"handle-search":t.getData}}),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogForm("create")}}},[t._v("Mời người dùng")])],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("TableData",{attrs:{form:t.form,"table-data":t.tableData,loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),n("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),n("DialogForm",{attrs:{options:t.options,"show-dialog":t.showDialog,editing:t.editing,form:t.form},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},a=[],i=n("768b"),o=(n("ac6a"),n("5df3"),n("96cf"),n("3b8d")),l=n("c103"),s=n("53ae"),c=n("fbc6"),u=n("b501"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("el-table-column",{attrs:{type:"index",align:"center",width:"50",label:"STT"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",width:"200",label:"Tên"}}),t._v(" "),n("el-table-column",{attrs:{prop:"email",width:"220",label:"Email"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone_number",width:"100",label:"Điện thoại"}}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:!0===e.row.active?"success":"warning","disable-transitions":"",size:"small"}},[t._v(t._s(!0===e.row.active?"Hoạt động":"Không hoạt động"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"department",label:"Phòng ban"}}),t._v(" "),n("el-table-column",{attrs:{prop:"position",label:"Chức vụ"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"200",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.row)}}},[t._v("Chỉnh sửa")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.row.id)}}},[t._v("Xóa")])]}}])})],1)],1)},p=[],m=(n("7f7f"),{props:["tableData","loading","form"],methods:{handleEdit:function(t){this.form.id=t.id,this.form.name=t.name,this.form.phone_number=t.phone_number,this.form.email=t.email,this.form.active=t.active,this.form.position_id=t.position_id,this.form.department_id=t.department_id,this.form.role_id=t.role_id,this.$emit("handle-edit")},handleDelete:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 3:return this.openFullScreen(),t.next=6,Object(l["e"])(e);case 6:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()}}),h=m,f=n("2877"),g=Object(f["a"])(h,d,p,!1,null,null,null),b=g.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{width:"30%",center:"",title:t.editing?"Chỉnh sửa người dùng":"Mời người dùng","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[t.editing?[n("el-form-item",{attrs:{label:"Tên",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Số điện thoại",prop:"phone_number"}},[n("el-input",{model:{value:t.form.phone_number,callback:function(e){t.$set(t.form,"phone_number",e)},expression:"form.phone_number"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Trạng thái"}},[n("el-switch",{model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1)]:n("el-form-item",{attrs:{label:"Email",prop:"email"}},[n("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Phòng ban",prop:"department_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"Chọn phòng ban"},model:{value:t.form.department_id,callback:function(e){t.$set(t.form,"department_id",e)},expression:"form.department_id"}},t._l(t.options.departments,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Chức vụ",prop:"position_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"Chọn chức vụ"},model:{value:t.form.position_id,callback:function(e){t.$set(t.form,"position_id",e)},expression:"form.position_id"}},t._l(t.options.positions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Quyền",prop:"role_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"Chọn quyền"},model:{value:t.form.role_id,callback:function(e){t.$set(t.form,"role_id",e)},expression:"form.role_id"}},t._l(t.options.roles,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.editing?n("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.updateData}},[t._v("Cập nhật")]):n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1)],1)},_=[],w=n("61f7"),y={props:["form","editing","showDialog","options"],data:function(){return{loading:!1,rules:{name:[{required:!0,message:"Bạn chưa nhập tên người dùng",trigger:"blur"}],email:[{required:!0,message:"Bạn chưa nhập địa chỉ email",trigger:"blur"},{type:"email",message:"Địa chỉ email không đúng",trigger:"blur"}],phone_number:[{required:!0,validator:w["c"],trigger:"blur"}],department_id:[{required:!0,message:"Bạn chưa chọn phòng ban",trigger:"blur"}],position_id:[{required:!0,message:"Bạn chưa chọn chức vụ",trigger:"blur"}],role_id:[{required:!0,message:"Bạn chưa chọn quyền",trigger:"blur"}]}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},updateData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(l["w"])(this.form,this.form.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),createData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,e=this.form,n=e.email,r=e.position_id,a=e.department_id,i=e.role_id,t.next=7,Object(l["k"])({email:n,position_id:r,department_id:a,role_id:i});case 7:this.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success(this.editing?"Cập nhật thành công":"Mời người dùng thành công"),this.closeDialog(),this.$emit("reload")}}},k=y,x=Object(f["a"])(k,v,_,!1,null,null,null),D=x.exports,O=n("333d"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-col",{attrs:{span:21}},[n("el-input",{staticClass:"input-text",attrs:{size:"medium",placeholder:"Nhập họ tên, SĐT hoặc Email",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("handle-search")}},model:{value:t.params.search,callback:function(e){t.$set(t.params,"search",e)},expression:"params.search"}}),t._v(" "),n("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-search",circle:""},on:{click:function(e){return t.$emit("handle-search")}}})],1)},$=[],S={props:["params"]},C=S,T=Object(f["a"])(C,j,$,!1,null,null,null),E=T.exports,F={components:{TableData:b,DialogForm:D,Pagination:O["a"],SearchForm:E},data:function(){return{tableData:[],loading:!1,search:"",options:{positions:[],departments:[]},pagination:{},params:{perPage:10,page:1,search:""},showDialog:!1,editing:!1,form:{name:"",phone_number:"",active:"",position_id:"",email:"",department_id:"",role_id:""}}},methods:{getData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(l["j"])(this.params);case 4:e=t.sent,this.tableData=e.data,this.pagination=e.meta,this.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),getOption:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([Object(s["b"])(),Object(c["b"])(),Object(u["d"])()]);case 3:e=t.sent,n=e.map((function(t){return t.data})),r=Object(i["a"])(n,3),this.options.positions=r[0],this.options.departments=r[1],this.options.roles=r[2],t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t){if("edit"==t)this.editing=!0;else{for(var e in this.form)this.form[e]="";this.editing=!1}this.showDialog=!0}},created:function(){this.getData(),this.getOption()}},R=F,q=Object(f["a"])(R,r,a,!1,null,null,null);e["default"]=q.exports},fbc6:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return s}));var r=n("b775");function a(t){return Object(r["a"])({url:"/departments",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/departments",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"/departments/".concat(e),method:"put",data:t})}function l(t){return Object(r["a"])({url:"/departments/".concat(t),method:"delete"})}function s(){return Object(r["a"])({url:"/departments/recursive",method:"get"})}}}]);