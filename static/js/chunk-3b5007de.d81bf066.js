(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b5007de"],{"18e0":function(t,e,n){"use strict";var a=n("4e93"),o=n.n(a);o.a},4474:function(t,e,n){"use strict";var a=n("4be1"),o=n.n(a);o.a},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"4be1":function(t,e,n){},"4e93":function(t,e,n){},"5d73":function(t,e,n){t.exports=n("469f")},"5df3":function(t,e,n){"use strict";var a=n("02f4")(!0);n("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=a(e,n),this._i+=t.length,{value:t,done:!1})}))},"768b":function(t,e,n){"use strict";var a=n("a745"),o=n.n(a);function r(t){if(o()(t))return t}var s=n("5d73"),i=n.n(s),l=n("c8bb"),c=n.n(l);function u(t,e){if(c()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],a=!0,o=!1,r=void 0;try{for(var s,l=i()(t);!(a=(s=l.next()).done);a=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){o=!0,r=u}finally{try{a||null==l["return"]||l["return"]()}finally{if(o)throw r}}return n}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){return r(t)||u(t,e)||h()}n.d(e,"a",(function(){return d}))},"787c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("Infomation")],1)},o=[],r=(n("a881"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",[n("h3",{staticClass:"title"},[t._v("\n        Thông tin hóa đơn\n        "),n("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.$router.push("/accounting/invoice/edit/"+t.$route.params.id)}}})],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Chủ sở hữu")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.owner))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Mã hóa đơn")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.code))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Đơn hàng")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.order))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Khách hàng")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.customer))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Mã số thuế")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.tax_code))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Người phụ trách")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.user))])])],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Số tiền thanh toán")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t._f("money")(t.data.payment_amount)))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Hình thức thanh toán")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.payment_method))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Ngày tạo")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t._f("date")(t.data.created_at)))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Ngày hết hạn")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t._f("date")(t.data.expiration_date)))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Trạng thái")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.status))])])],1),t._v(" "),n("el-row",{staticClass:"item"},[n("el-col",{attrs:{span:10}},[n("p",{staticClass:"my-label"},[t._v("Ghi chú")])]),t._v(" "),n("el-col",{attrs:{span:14}},[n("p",{staticClass:"content"},[t._v(t._s(t.data.note))])])],1)],1)],1),t._v(" "),n("Bill")],1)}),s=[],i=(n("96cf"),n("3b8d")),l=n("948b"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("h3",{staticClass:"title"},[t._v("\n        Danh sách phiếu thanh toán\n        "),n("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small",icon:"el-icon-plus",circle:""},on:{click:function(e){return t.showDialogForm("create")}}})],1),t._v(" "),n("TableData",{attrs:{form:t.form,"table-data":t.tableData,loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit",e)},"handle-delete":function(e){return t.getData()},"handle-verify":t.getData,"update:loading":function(e){t.loading=e}}}),t._v(" "),n("DialogForm",{attrs:{"show-dialog":t.showDialog,editing:t.editing,cashbooks:t.cashbooks,form:t.form},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},u=[],h=(n("ac6a"),n("5df3"),n("768b")),d=n("b775");function m(t){return Object(d["a"])({url:"/bills",method:"get",params:t})}function p(t){return Object(d["a"])({url:"/bills",method:"post",data:t})}function f(t,e){return Object(d["a"])({url:"/bills/".concat(e),method:"put",data:t})}function v(t){return Object(d["a"])({url:"/bills/".concat(t),method:"delete"})}function b(t){return Object(d["a"])({url:"/bills/".concat(t,"/verify"),method:"put"})}var _=n("8e8a"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{prop:"created_at",width:"100",label:"Ngày tạo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.created_at)))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"Tên"}}),t._v(" "),n("el-table-column",{attrs:{width:"150",label:"Số tiền thanh toán"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("money")(e.row.payment_amount)))]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"payment_method",width:"165",label:"Hình thức thanh toán"}}),t._v(" "),n("el-table-column",{attrs:{prop:"cashbook.name",width:"180",label:"Sổ quỹ, tài khoản NH"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",width:"120",label:"Trạng thái"}}),t._v(" "),n("el-table-column",{attrs:{prop:"note",label:"Ghi chú"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",width:"180",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"medium",icon:"el-icon-edit",circle:""},on:{click:function(n){return t.handleEdit(e.row)}}}),t._v(" "),n("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return t.handleDelete(e.row.id)}}}),t._v(" "),"Chưa xác nhận"==e.row.status?n("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-circle-check",circle:""},on:{click:function(n){return t.verifyBill(e.row.id)}}}):t._e()]}}])})],1)],1)},y=[],w={props:["tableData","loading"],methods:{handleEdit:function(t){this.$emit("handle-edit",t)},handleDelete:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,v(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),verifyBill:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có muốn xác nhận phiếu thanh toán này?","Xác nhận",{confirmButtonText:"Xác nhận",cancelButtonText:"Hủy",type:"warning"});case 2:return t.next=4,b(e);case 4:this.$message.success("Xác nhận phiếu thanh toán thành công"),this.$emit("handle-verify");case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},k=w,C=n("2877"),x=Object(C["a"])(k,g,y,!1,null,null,null),D=x.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{width:"40%",center:"",top:"10vh",title:this.editing?"Chỉnh sửa phiếu thanh toán":"Thêm phiếu thanh toán","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[n("el-form",{ref:"form",attrs:{"label-position":"left",labelWidth:"165px",model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"Tên thanh toán",prop:"name"}},[n("el-input",{attrs:{placeholder:"Nhập tên thanh toán"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Số tiền thanh toán",prop:"payment_amount"}},[n("el-input",{attrs:{type:"number",min:"0",placeholder:"Nhập số tiền thanh toán"},model:{value:t.form.payment_amount,callback:function(e){t.$set(t.form,"payment_amount",e)},expression:"form.payment_amount"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Hình thức thanh toán",prop:"payment_method"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn hình thức thanh toán"},model:{value:t.form.payment_method,callback:function(e){t.$set(t.form,"payment_method",e)},expression:"form.payment_method"}},[n("el-option",{attrs:{label:"Tiền mặt",value:"Tiền mặt"}}),t._v(" "),n("el-option",{attrs:{label:"Chuyển khoản",value:"Chuyển khoản"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Sổ quỹ",prop:"cashbook_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""==t.form.payment_method,placeholder:"Chọn sổ quỹ"},model:{value:t.form.cashbook_id,callback:function(e){t.$set(t.form,"cashbook_id",e)},expression:"form.cashbook_id"}},t._l(t.filteredCashbooks,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Trạng thái",prop:"payment_method"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Chọn trạng thái"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[n("el-option",{attrs:{label:"Đã xác nhận",value:"Đã xác nhận"}}),t._v(" "),n("el-option",{attrs:{label:"Chưa xác nhận",value:"Chưa xác nhận"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Ghi chú"}},[n("el-input",{attrs:{placeholder:"Nhập ghi chú"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.editing?n("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.updateData}},[t._v("Cập nhật")]):n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1)],1)},O=[],$={props:["form","editing","showDialog","cashbooks"],computed:{filteredCashbooks:function(){return"Tiền mặt"==this.form.payment_method?this.cashbooks.filter((function(t){return"Tiền mặt"==t.type})):this.cashbooks.filter((function(t){return"Ngân hàng"==t.type}))}},data:function(){return{loading:!1,rules:{name:[{required:!0,message:"Hãy nhập tên thanh toán",trigger:"blur"}],payment_amount:[{required:!0,message:"Hãy nhập số tiền thanh toán",trigger:"blur"}],payment_method:[{required:!0,message:"Hãy chọn phương thức thanh toán",trigger:"blur"}],cashbook_id:[{required:!0,message:"Hãy chọn sổ quỹ",trigger:"blur"}],status:[{required:!0,message:"Hãy chọn trạng thái",trigger:"blur"}]}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},updateData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,f(this.form,this.form.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),createData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,this.form.invoice_id=this.$route.params.id,t.next=7,p(this.form);case 7:this.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success(this.editing?"Cập nhật thành công":"Thêm mới thành công"),this.closeDialog(),this.$emit("reload")}}},S=$,T=Object(C["a"])(S,j,O,!1,null,null,null),H=T.exports,F={components:{TableData:D,DialogForm:H},data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},showDialog:!1,editing:!1,cashbooks:[],form:{id:"",name:"",payment_method:"",payment_amount:"",note:"",cashbook_id:"",status:""}}},methods:{getData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Promise.all([m({invoice:this.$route.params.id}),Object(_["b"])({list:!0})]);case 4:e=t.sent,n=Object(h["a"])(e,2),a=n[0],o=n[1],this.tableData=a.data,this.cashbooks=o.data,this.loading=!1,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t,e){if("edit"==t){for(var n in this.form)this.form[n]=e[n];this.editing=!0}else{for(var a in this.form)this.form[a]="";this.editing=!1}this.showDialog=!0}},created:function(){this.getData()}},R=F,q=(n("4474"),Object(C["a"])(R,c,u,!1,null,"51250746",null)),B=q.exports,N={components:{Bill:B},data:function(){return{data:"",bills:[]}},methods:{getInvoice:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.openFullScreen(),t.next=4,Object(l["c"])(this.$route.params.id);case 4:e=t.sent,n=e.data,this.data=n,this.closeFullScreen(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getInvoice()}},E=N,I=(n("18e0"),Object(C["a"])(E,r,s,!1,null,"4be71565",null)),z=I.exports,X={components:{Infomation:z}},G=X,J=Object(C["a"])(G,a,o,!1,null,null,null);e["default"]=J.exports},"7d7b":function(t,e,n){var a=n("e4ae"),o=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},"8e8a":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return i}));var a=n("b775");function o(t){return Object(a["a"])({url:"/cashbooks",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/cashbooks",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/cashbooks/".concat(e),method:"put",data:t})}function i(t){return Object(a["a"])({url:"/cashbooks/".concat(t),method:"delete"})}},"948b":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return l}));var a=n("b775");function o(t){return Object(a["a"])({url:"/invoices",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/invoices",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/invoices/".concat(t),method:"get",params:e})}function i(t,e){return Object(a["a"])({url:"/invoices/".concat(e),method:"put",data:t})}function l(t){return Object(a["a"])({url:"/invoices/".concat(t),method:"delete"})}},a881:function(t,e,n){"use strict";e["a"]={data:function(){return{count:{file:0,note:0,task:0,opportunity:0,order:0,quote:0,email:0,contact:0,call:0,appointment:0}}},methods:{handleLoad:function(t,e){this.count[t]=e}}}}}]);