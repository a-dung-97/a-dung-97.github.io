(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"07db":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogForm("create")}}},[t._v("Thêm cuộc gọi")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{type:t.type,"table-data":t.tableData,loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit",e)},"handle-delete":t.getData,"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("DialogForm",{attrs:{"is-edit":t.isEdit,lead:t.lead,data:t.data,contact:t.contact,customer:t.customer,"show-dialog":t.showDialog,type:t.type},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("4499"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"STT"}}),t._v(" "),a("el-table-column",{attrs:{label:"Tiêu đề"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link",attrs:{tag:"a",to:"/business/call/show/"+e.row.id}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user",label:"Chủ sở hữu"}}),t._v(" "),"customer"==t.type?a("el-table-column",{attrs:{prop:"contact",label:"Liên hệ"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"Thời gian gọi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.time)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Thời lượng(s)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.duration))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"120",align:"center",label:"Xóa"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.$emit("handle-edit",e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"medium",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}})]}}])})],1)],1)},s=[],c={props:["tableData","loading","form","type"],methods:{handleEdit:function(t){this.form.id=t.id,this.form.title=t.title,this.form.content=t.content,this.$emit("handle-edit")},handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(o["a"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},u=c,p=a("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",width:"40%",center:"",title:t.isEdit?"Sửa cuộc gọi":"Thêm cuộc gọi","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"user_id"}},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.userOptions,(function(e){return a("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Đối tượng",prop:"callable_id"}},[a("el-input",{ref:"input",attrs:{disabled:null!=t.type&&"customer"!=t.type,placeholder:"App\\Lead"==t.form.callable_type?"Chọn tiềm năng":"Chọn liên hệ"},on:{focus:t.openDialog},model:{value:t.obj,callback:function(e){t.obj=e},expression:"obj"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend",disabled:null!=t.type},on:{change:function(e){t.form.callable_id="",t.obj=""}},slot:"prepend",model:{value:t.form.callable_type,callback:function(e){t.$set(t.form,"callable_type",e)},expression:"form.callable_type"}},[a("el-option",{attrs:{label:"Tiềm năng",value:"App\\Lead"}}),t._v(" "),a("el-option",{attrs:{label:"Liên hệ",value:"App\\Contact"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Tiêu đề",prop:"title"}},[a("el-input",{attrs:{placeholder:"Nhập tiêu đề"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Loại cuộc gọi",prop:"type"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn loại cuộc gọi"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-option",{attrs:{value:"Gọi đi",label:"Gọi đi"}}),t._v(" "),a("el-option",{attrs:{value:"Gọi đến",label:"Gọi đến"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Mục tiêu",prop:"target"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn mục tiêu"},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},[a("el-option",{attrs:{value:"Triển vọng",label:"Triển vọng"}}),t._v(" "),a("el-option",{attrs:{value:"Đàm phán",label:"Đàm phán"}}),t._v(" "),a("el-option",{attrs:{value:"Hỗ trợ",label:"Hỗ trợ"}}),t._v(" "),a("el-option",{attrs:{value:"Giới thiệu",label:"Giới thiệu"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Thời gian gọi",prop:"time"}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime",placeholder:"Chọn thời gian gọi",format:"dd/MM/yyyy HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Thời lượng(s)",prop:"duration"}},[a("el-input-number",{staticClass:"w-100",attrs:{min:0},model:{value:t.form.duration,callback:function(e){t.$set(t.form,"duration",e)},expression:"form.duration"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Kết quả"}},[a("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:"Nhập kết quả"},model:{value:t.form.result,callback:function(e){t.$set(t.form,"result",e)},expression:"form.result"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Mô tả"}},[a("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:"Nhập mô tả"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.isEdit?a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("Cập nhật")]):a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1),t._v(" "),t.customer?a("SelectCustomer",{attrs:{customer:t.customer.id,type:t.form.callable_type,"show-dialog":t.showDialog1},on:{"handle-select":t.handleSelect,"update:showDialog":function(e){t.showDialog1=e},"update:show-dialog":function(e){t.showDialog1=e}}}):t._e()],1)},g=[],f=(a("7f7f"),a("bd86")),b=a("5d63"),v={components:{SelectCustomer:b["a"]},props:["showDialog","type","lead","contact","customer","isEdit","data"],watch:{lead:function(t){t&&(this.obj=t)},contact:function(t){t&&(this.obj=t)},isEdit:function(t){if(t){for(var e in this.form)this.form[e]=this.data[e];"customer"==this.type&&(this.obj=this.data.contact)}else{for(var a in this.form)this.form[a]="";"lead"==this.type?(this.form.callable_type="App\\Lead",this.form.callable_id=this.$route.params.id):"contact"==this.type?(this.form.callable_type="App\\Contact",this.form.callable_id=this.$route.params.id):"customer"==this.type&&(this.form.callable_type="App\\Contact")}}},data:function(){var t;return{obj:"",showDialog1:!1,loading:!1,reminder:!1,rules:(t={callable_id:[{required:!0,message:"Hãy chọn đối tượng"}],user_id:[{required:!0,message:"Hãy chọn chủ sở hữu",trigger:"blur"}],title:[{required:!0,message:"Hãy nhập tiêu đề",trigger:"blur"}],type:[{required:!0,message:"Hãy chọn chủ sở hữu",trigger:"blur"}],target:[{required:!0,message:"Hãy chọn mục tiêu",trigger:"blur"}]},Object(f["a"])(t,"target",[{required:!0,message:"Hãy chọn mục tiêu",trigger:"blur"}]),Object(f["a"])(t,"time",[{required:!0,message:"Hãy chọn thời gian gọi",trigger:"blur"}]),Object(f["a"])(t,"duration",[{required:!0,message:"Hãy chọn thời lượng",trigger:"blur"}]),t),form:{id:"",user_id:"",type:"",title:"",time:"",duration:"",target:"",result:"",description:"",callable_id:"",callable_type:""}}},methods:{handleSelect:function(t){"customer"==this.type&&(this.obj=t.name,this.form.callable_id=t.id)},openDialog:function(){this.showDialog1=!0},closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},createData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.openFullScreen(),t.next=6,Object(o["d"])(this.form);case 6:this.$message.success("Thêm cuộc gọi thành công"),this.reload(),this.closeFullScreen(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),updateData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.openFullScreen(),t.next=6,Object(o["e"])(this.form,this.form.id);case 6:this.closeFullScreen(),this.$message.success("Sửa cuộc gọi thành công"),this.reload(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.closeDialog(),this.$emit("reload")}},created:function(){"lead"==this.type?(this.form.callable_type="App\\Lead",this.form.callable_id=this.$route.params.id):"contact"==this.type?(this.form.callable_type="App\\Contact",this.form.callable_id=this.$route.params.id):"customer"==this.type&&(this.form.callable_type="App\\Contact"),this.getUsers()}},_=v,w=Object(p["a"])(_,m,g,!1,null,null,null),y=w.exports,D=a("333d"),x={components:{TableData:d,DialogForm:y,Pagination:D["a"]},props:["type","lead","contact","customer"],data:function(){return{tableData:[],isEdit:!1,loading:!1,data:"",pagination:{},params:{perPage:10,page:1},showDialog:!1}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["b"])(this.params,this.type,this.$route.params.id);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,this.$emit("handle-load",n.total),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t,e){this.showDialog=!0,"edit"==t?(this.isEdit=!0,this.data=e):this.isEdit=!1}},created:function(){this.getData()}},k=x,$=Object(p["a"])(k,n,i,!1,null,null,null);e["a"]=$.exports},"333d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block",staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-pagination",{staticStyle:{},attrs:{background:"","current-page":t.pagination.current_page,"page-size":Number(t.pagination.per_page),"page-sizes":[10,25,50,100],layout:"total, sizes, prev, pager, next",total:t.pagination.total},on:{"size-change":function(e){return t.$emit("size-change",e)},"current-change":function(e){return t.$emit("current-change",e)},"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)}}})],1)},i=[],r={props:["pagination"]},o=r,l=a("2877"),s=Object(l["a"])(o,n,i,!1,null,null,null);e["a"]=s.exports},5091:function(t,e,a){},"5d63":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",title:"App\\Lead"==t.type?"Chọn tiềm năng":"App\\Customer"==t.type?"Chọn khách hàng":"Chọn liên hệ",visible:t.showDialog,"before-close":t.closeDialog,width:"75%","append-to-body":"",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{staticStyle:{width:"25%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"Tìm kiếm theo tên"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.params.page=1,t.getData()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{height:"400px","highlight-current-row":"",data:t.tableData},on:{"current-change":t.handleCurrentChange}},["App\\Lead"==t.type?a("el-table-column",{attrs:{prop:"name",label:"Họ tên"}}):a("el-table-column",{attrs:{prop:"name",label:"Tên"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"Email"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone_number",label:"Số điện thoại"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile_number",label:"Số di động"}})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("3699"),l=a("4a49"),s=a("dd64"),c=a("333d"),u={props:["showDialog","type","customer"],components:{Pagination:c["a"]},watch:{showDialog:function(t){t&&this.getData()}},data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},name:"",params:{name:"",perPage:10,list:!0}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,"App\\Lead"==this.type?this.getDataFunc=o["b"]:"App\\Customer"==this.type?this.getDataFunc=l["b"]:(this.params.customer=this.customer,this.getDataFunc=s["a"]),t.next=5,this.getDataFunc(this.params);case 5:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1,this.tableData=[];case 18:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){t&&(this.$emit("handle-select",t),this.closeDialog())}}},p=u,h=a("2877"),d=Object(h["a"])(p,n,i,!1,null,"fafc27e0",null);e["a"]=d.exports},"600b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["customer"!=t.type?a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogForm("create")}}},[t._v("Thêm cuộc hẹn")])],1)],1):t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{type:t.type,"table-data":t.tableData,loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit",e)},"handle-delete":t.getData,"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("DialogForm",{attrs:{"is-edit":t.isEdit,data:t.data,"show-dialog":t.showDialog,type:t.type},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("e1ef"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"STT"}}),t._v(" "),a("el-table-column",{attrs:{label:"Tiêu đề"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link",attrs:{tag:"a",to:"/business/appointment/show/"+e.row.id}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user",label:"Chủ sở hữu"}}),t._v(" "),a("el-table-column",{attrs:{label:"Thời gian hẹn"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.time)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.status))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"120",align:"center",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"medium",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.$emit("handle-edit",e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"medium",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}})]}}])})],1)],1)},s=[],c={props:["tableData","loading","form","type"],methods:{handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(o["a"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},u=c,p=a("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",width:"40%",center:"",title:t.isEdit?"Sửa cuộc hẹn":"Thêm cuộc hẹn","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"180px"}},[a("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"user_id"}},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.userOptions,(function(e){return a("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Tiêu đề",prop:"title"}},[a("el-input",{attrs:{placeholder:"Nhập tiêu đề"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Thời gian hẹn",prop:"time"}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"datetime",placeholder:"Chọn thời gian hẹn",format:"dd/MM/yyyy HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Địa điểm"}},[a("el-input",{attrs:{placeholder:"Nhập địa điểm hẹn"},model:{value:t.form.place,callback:function(e){t.$set(t.form,"place",e)},expression:"form.place"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Người dùng tham gia"}},[a("el-input",{ref:"input",on:{focus:function(e){return t.openDialog("users")}},model:{value:t.count.users,callback:function(e){t.$set(t.count,"users",e)},expression:"count.users"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Tiềm năng tham gia"}},[a("el-input",{ref:"input",on:{focus:function(e){return t.openDialog("leads")}},model:{value:t.count.leads,callback:function(e){t.$set(t.count,"leads",e)},expression:"count.leads"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Liên hệ tham gia"}},[a("el-input",{ref:"input",on:{focus:function(e){return t.openDialog("contacts")}},model:{value:t.count.contacts,callback:function(e){t.$set(t.count,"contacts",e)},expression:"count.contacts"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Mô tả"}},[a("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:"Nhập mô tả"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.isEdit?a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.updateData}},[t._v("Cập nhật")]):a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1),t._v(" "),a("SelectParticipants",{attrs:{mode:t.mode,"show-dialog":t.showDialog1,data:t.selection},on:{"handle-select":t.handleSelect,"update:showDialog":function(e){t.showDialog1=e},"update:show-dialog":function(e){t.showDialog1=e}}})],1)},g=[],f=(a("c5f6"),a("5d63")),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"before-close":t.closeDialog,title:"Chọn người tham gia",visible:t.showDialog,"append-to-body":"",width:"40%",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{attrs:{placeholder:"Nhập để tìm kiếm"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getData(e)}},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}}),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":"300"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"Tên"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"Email"}})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("Hủy")]),t._v(" "),a("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:t.updateData}},[t._v("OK")])],1)],1)},v=[],_=(a("ac6a"),a("75fc")),w=a("c103"),y=a("3699"),D=a("dd64"),x=a("333d"),k={props:["showDialog","data","mode"],components:{Pagination:x["a"]},data:function(){return{loading:!1,btnLoading:!1,search:null,pagination:{},params:{perPage:10,list:!0,name:""},tableData:[]}},computed:{tmp:function(){return Object(_["a"])(this.data)}},watch:{showDialog:function(t){t&&this.getData()}},methods:{cancel:function(){var t=this;this.closeDialog(),this.tmp.splice(0,this.tmp.length),this.data.forEach((function(e){return t.tmp.push(e)}))},closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,this.loading=!0,e="",t.t0=this.mode,t.next="users"===t.t0?6:"contacts"===t.t0?8:"leads"===t.t0?10:12;break;case 6:return e=w["j"],t.abrupt("break",13);case 8:return e=D["a"],t.abrupt("break",13);case 10:return e=y["b"],t.abrupt("break",13);case 12:return t.abrupt("break",13);case 13:return t.next=15,e(this.params);case 15:a=t.sent,this.tableData=a.data,this.pagination=a.meta,n=this.tableData.filter((function(t){return-1!=i.tmp.indexOf(t.id)})),setTimeout((function(){i.toggleSelection(n)}),0),this.loading=!1,t.next=26;break;case 23:t.prev=23,t.t1=t["catch"](0),this.loading=!1;case 26:case"end":return t.stop()}}),t,this,[[0,23]])})));function e(){return t.apply(this,arguments)}return e}(),getToggleList:function(){var t=this;return this.tableData.filter((function(e){return-1!=t.tmp.indexOf(e.id)}))},handleSelectionChange:function(t){var e=this;t=t.map((function(t){return t.id}));var a=this.getToggleList().map((function(t){return t.id}));a.forEach((function(a){-1==t.indexOf(a)&&e.tmp.splice(e.tmp.indexOf(a),1)})),t.forEach((function(t){-1==a.indexOf(t)&&e.tmp.push(t)}))},toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},updateData:function(){this.$emit("handle-select",this.tmp),this.closeDialog()}}},$=k,C=Object(p["a"])($,b,v,!1,null,null,null),S=C.exports,T={components:{SelectCustomer:f["a"],SelectParticipants:S},props:["showDialog","type","isEdit","data"],watch:{showDialog:function(){if(this.isEdit){for(var t in this.form)this.form[t]=this.data[t];for(var e in this.count)this.count[e]=this.form.participants[e].length}else{for(var a in this.form)"participants"!=a&&(this.form[a]="");for(var n in this.form["participants"])this.form["participants"][n]=[];for(var i in this.form["participants"]["".concat(this.type,"s")]=[Number(this.$route.params.id)],this.count)this.count[i]=0;this.count["".concat(this.type,"s")]=1}}},data:function(){return{selection:"",loading:!1,count:{users:0,leads:0,contacts:0},mode:"",showDialog1:!1,rules:{user_id:[{required:!0,message:"Hãy chọn chủ sở hữu",trigger:"blur"}],title:[{required:!0,message:"Hãy nhập tiêu đề",trigger:"blur"}],time:[{required:!0,message:"Hãy chọn thời gian hẹn",trigger:"blur"}]},form:{id:"",user_id:"",title:"",time:"",place:"",description:"",participants:{contacts:[],leads:[],users:[]}}}},methods:{handleSelect:function(t){this.count[this.mode]=t.length,this.form.participants[this.mode]=t},openDialog:function(t){this.mode=t,this.selection=this.form.participants[t],this.showDialog1=!0},closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},createData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(o["d"])(this.form);case 6:this.$message.success("Thêm cuộc hẹn thành công"),this.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),updateData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(o["e"])(this.form,this.form.id);case 6:this.$message.success("Sửa cuộc hẹn thành công"),this.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),this.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.closeDialog(),this.$emit("reload")}},created:function(){this.getUsers()}},j=T,O=Object(p["a"])(j,m,g,!1,null,null,null),R=O.exports,E={components:{TableData:d,DialogForm:R,Pagination:x["a"]},props:["type"],data:function(){return{tableData:[],isEdit:!1,loading:!1,data:"",pagination:{},params:{perPage:10,page:1},showDialog:!1}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["b"])(this.params,this.type,this.$route.params.id);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,this.$emit("handle-load",n.total),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t,e){this.showDialog=!0,"edit"==t?(this.isEdit=!0,this.data=e):this.isEdit=!1}},created:function(){this.getData()}},F=E,P=Object(p["a"])(F,n,i,!1,null,null,null);e["a"]=P.exports},"63f3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogForm("create")}}},[t._v("Thêm công việc")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{form:t.form,"table-data":t.tableData,loading:t.loading},on:{"handle-delete":t.getData,"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("DialogForm",{attrs:{customer:t.customer,"show-dialog":t.showDialog,form:t.form,type:t.type},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("005c"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"STT"}}),t._v(" "),a("el-table-column",{attrs:{width:"250",label:"Tiêu đề"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link",attrs:{tag:"a",to:"/business/task/show/"+e.row.id}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"user",width:"150",label:"Chủ sở hữu"}}),t._v(" "),a("el-table-column",{attrs:{width:"130",label:"Trạng thái"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.row.status))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140",label:"Ngày bắt đầu"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.start_date)))]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"140",label:"Ngày hết hạn"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.expiration_date)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"Mô tả"}}),t._v(" "),a("el-table-column",{attrs:{width:"60",align:"center",label:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}})]}}])})],1)],1)},s=[],c={props:["tableData","loading","form"],methods:{handleEdit:function(t){this.form.id=t.id,this.form.title=t.title,this.form.content=t.content,this.$emit("handle-edit")},handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(o["b"])(e);case 5:this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete"),this.closeFullScreen();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},u=c,p=a("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",width:"40%",center:"",title:"Thêm công việc","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"Chủ sở hữu",prop:"user_id"}},[a("el-select",{staticClass:"w-100",attrs:{filterable:"",placeholder:"Chọn chủ sở hữu"},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},t._l(t.userOptions,(function(e){return a("el-option",{key:e.id,staticStyle:{"max-height":"100%"},attrs:{label:e.name,value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.email))])])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Tiêu đề",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),"opportunity"==t.type||"customer"==t.type?a("el-form-item",{attrs:{label:"Liên hệ"}},[a("el-input",{ref:"input1",attrs:{clearable:"",placeholder:"Chọn liên hệ"},on:{focus:function(e){return t.openDialog("contact")},clear:function(e){t.form.contact_id=""}},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}})],1):t._e(),t._v(" "),"contact"==t.type||"customer"==t.type?a("el-form-item",{attrs:{label:"Cơ hội"}},[a("el-input",{ref:"input2",attrs:{clearable:"",placeholder:"Chọn cơ hội"},on:{focus:function(e){return t.openDialog("opportunity")},clear:function(e){t.form.opportunity_id=""}},model:{value:t.opportunity,callback:function(e){t.opportunity=e},expression:"opportunity"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"Ngày bắt đầu"}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày bắt đầu",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Ngày hết hạn"}},[a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",placeholder:"Chọn ngày hết hạn",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},model:{value:t.form.expiration_date,callback:function(e){t.$set(t.form,"expiration_date",e)},expression:"form.expiration_date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Độ ưu tiên"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn độ ưu tiên"},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}},[a("el-option",{attrs:{value:"1",label:"Thấp nhất"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"Thấp"}}),t._v(" "),a("el-option",{attrs:{value:"3",label:"Bình thường"}}),t._v(" "),a("el-option",{attrs:{value:"4",label:"Cao"}}),t._v(" "),a("el-option",{attrs:{value:"5",label:"Cao nhất"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Trạng thái"}},[a("el-select",{staticClass:"w-100",attrs:{placeholder:"Chọn trạng thái"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-option",{attrs:{value:"1",label:"Chưa thực hiện"}}),t._v(" "),a("el-option",{attrs:{value:"2",label:"Đang thực hiện"}}),t._v(" "),a("el-option",{attrs:{value:"3",label:"Đã giải quyết"}}),t._v(" "),a("el-option",{attrs:{value:"4",label:"Đã hoàn thành"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"Nhắc nhở"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.reminder,callback:function(e){t.reminder=e},expression:"reminder"}})],1),t._v(" "),t.reminder?[a("el-form-item",{attrs:{label:"Ngày nhắc"}},[a("el-date-picker",{attrs:{type:"datetime",format:"dd/MM/yyyy HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.reminder_time,callback:function(e){t.$set(t.form,"reminder_time",e)},expression:"form.reminder_time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Kiểu nhắc"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Email")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Thông báo")]),t._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:t.form.reminder_type,callback:function(e){t.$set(t.form,"reminder_type",e)},expression:"form.reminder_type"}},[t._v("Cả hai")])],1)]:t._e()],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1),t._v(" "),a("SelectCustomer",{attrs:{type:"contact","show-dialog":t.showDialog2,customer:t.customerId},on:{"handle-select":t.handleSelectCon,"update:showDialog":function(e){t.showDialog2=e},"update:show-dialog":function(e){t.showDialog2=e}}}),t._v(" "),a("SelectOpportunity",{attrs:{"show-dialog":t.showDialog1,customer:t.customerId},on:{"handle-select":t.handleSelectOp,"update:showDialog":function(e){t.showDialog1=e},"update:show-dialog":function(e){t.showDialog1=e}}})],1)},g=[],f=a("db72"),b=(a("7f7f"),a("5d63")),v=a("e875"),_={components:{SelectCustomer:b["a"],SelectOpportunity:v["a"]},props:["form","showDialog","type","customer"],data:function(){return{mode:"",showDialog1:!1,showDialog2:!1,contact:"",opportunity:"",loading:!1,reminder:!1,rules:{title:[{required:!0,message:"Hãy nhập tiêu đề",trigger:"blur"}],user_id:[{required:!0,message:"Hãy chọn chủ sở hữu",trigger:"blur"}]}}},computed:{customerId:function(){return"customer"==this.type?this.$route.params.id:this.customer}},watch:{reminder:function(t){var e=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),a=e+" "+(new Date).toLocaleTimeString("en-GB");t?(this.form.reminder_type="1",this.form.reminder_time=a):(this.form.reminder_type="",this.form.reminder_time="")}},methods:{openDialog:function(t){"opportunity"==t?this.showDialog1=!0:this.showDialog2=!0},handleSelectCon:function(t){this.contact=t.name,this.form.contact_id=t.id},handleSelectOp:function(t){this.opportunity=t.name,this.form.opportunity_id=t.id},closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},createData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,e=this.form,"customer"!=this.type&&"lead"!=this.type&&(e=Object(f["a"])({},this.form,{taskable_type:"App\\Customer",taskable_id:this.customerId})),t.next=8,Object(o["a"])(e,this.type,this.$route.params.id);case 8:this.reload(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success("Thêm mới thành công"),this.closeDialog(),this.$emit("reload")}},created:function(){this.getUsers()}},w=_,y=Object(p["a"])(w,m,g,!1,null,null,null),D=y.exports,x=a("333d"),k={components:{TableData:d,DialogForm:D,Pagination:x["a"]},props:["type","customer"],data:function(){return{tableData:[],loading:!1,pagination:{},params:{perPage:10,page:1},showDialog:!1,form:{id:"",user_id:"",title:"",start_date:"",expiration_date:"",priority:"",contact_id:"",opportunity_id:"",status:"",reminder_time:"",reminder_type:""}}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["d"])(this.params,this.type,this.$route.params.id);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,this.$emit("handle-load",n.total),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(){for(var t in this.form)this.form[t]="";this.form.start_date=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),this.showDialog=!0}},created:function(){this.getData()}},$=k,C=Object(p["a"])($,n,i,!1,null,null,null);e["a"]=C.exports},"64f9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("editor",{ref:"editor",attrs:{"api-key":"xiuqepq3su0jcg1exp6skcmp856lvauwlhgxgt7ffbjc9jii",init:t.fullPlugin,"cloud-channel":"5-stable"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},i=[],r=a("ca72"),o={props:["content","initialValue","height"],components:{editor:r["a"]},watch:{value:function(t){this.$emit("update:content",t)},content:function(t){this.value=this.content}},data:function(){var t=this.$store.getters.tiny_drive_token,e=this.height;return{value:"",fullPlugin:{tinydrive_token_provider:function(e,a){e({token:t})},height:e,toolbar_drawer:!1,selector:"textarea",tinydrive_dropbox_app_key:"pgpbcjipdzj0e78",language_url:"/tinymce/langs/vi.js",language:"vi",menubar:"edit view insert format tools table tc help",plugins:"print preview fullpage powerpaste casechange importcss tinydrive searchreplace autolink autosave save directionality advcode visualblocks visualchars fullscreen image link media mediaembed template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists checklist wordcount a11ychecker imagetools textpattern noneditable help formatpainter permanentpen pageembed charmap  mentions quickbars linkchecker emoticons",toolbar:"bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist checklist | forecolor backcolor casechange permanentpen formatpainter removeformat | pagebreak | charmap emoticons | fullscreen  preview print  insertfile image media pageembed link  ltr rtl"}}},created:function(){this.value=this.content}},l=o,s=a("2877"),c=Object(s["a"])(l,n,i,!1,null,null,null);e["a"]=c.exports},"6d67":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{width:"30%",center:"",title:"Thêm vào danh sách email","before-close":t.closeDialog,visible:t.showDialog,top:"5vh"},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"300"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"Tên",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{property:"Mô tả",label:"Mô tả",prop:"description"}})],1),t._v(" "),a("p",{staticClass:"warning-text"},[t._v("Chú ý: Tiềm năng, khách hàng hoặc liên hệ không có email sẽ bị bỏ qua")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.addMembers}},[t._v("Cập nhật")])],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"50%",center:"",title:"Cảnh báo lỗi",visible:t.showErrors,top:"5vh"},on:{"update:visible":function(e){t.showErrors=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.errors,height:"300"}},[a("el-table-column",{attrs:{type:"index",label:"STT",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"Tên",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"Email"}}),t._v(" "),a("el-table-column",{attrs:{prop:"list",label:"Danh sách"}})],1),t._v(" "),a("p",{staticClass:"warning-text"},[t._v("Email bị bỏ qua do đã tồn tại trong danh sách mail, các email hợp lệ vẫn được thêm")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showErrors=!1,t.errors=[]}}},[t._v("Xác nhận")])],1)],1)],1)},i=[],r=(a("96cf"),a("3b8d")),o=(a("7f7f"),a("75fc")),l=a("102e"),s={props:["showDialog","type","members"],data:function(){return{loading:!1,showErrors:!1,btnLoading:!1,tableData:[],errors:[],lists:[]}},watch:{showDialog:function(t){t&&this.getMailingLists()},errors:function(t){t.length>0&&(this.showErrors=!0)}},methods:{closeDialog:function(){this.lists=[],this.$emit("update:showDialog",!1)},handleSelectionChange:function(t){this.lists=Object(o["a"])(t.map((function(t){return{id:t.id,name:t.name}})))},getMailingLists:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(l["d"])({list:!0});case 4:e=t.sent,a=e.data,this.tableData=a,this.loading=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),addMembers:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.btnLoading=!0,t.next=4,Object(l["a"])({type:this.type,mailing_lists:this.lists,members:this.members});case 4:e=t.sent,a=e.errors,this.closeDialog(),a.length>0?this.errors=a:this.$message.success("Thêm vào danh sách email thành công"),this.btnLoading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.btnLoading=!1;case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()}},c=s,u=(a("a567"),a("2877")),p=Object(u["a"])(c,n,i,!1,null,null,null);e["a"]=p.exports},"6e67":function(t,e,a){"use strict";var n=a("cde5"),i=a.n(n);i.a},"7d3d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"65%",center:"",top:"0vh",title:"Gửi email","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.rules}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Từ tên",prop:"from_name"}},[a("el-input",{attrs:{placeholder:"Nhập tên người gửi"},model:{value:t.form.from_name,callback:function(e){t.$set(t.form,"from_name",e)},expression:"form.from_name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Từ email",prop:"from_email"}},[a("el-select",{staticClass:"w-100",attrs:{filterable:""},model:{value:t.form.from_email,callback:function(e){t.$set(t.form,"from_email",e)},expression:"form.from_email"}},t._l(t.emailAddresses,(function(t){return a("el-option",{key:t.id,attrs:{label:t.email,value:t.email}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Chủ đề",prop:"subject"}},[a("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"Nhập chủ đề"},model:{value:t.form.subject,callback:function(e){t.$set(t.form,"subject",e)},expression:"form.subject"}})],1)],1)],1)],1),t._v(" "),null==t.quote?a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(e){t.showDialog1=!0}}},[t._v("Chọn mẫu email")]):t._e(),t._v(" "),a("TinyMCE",{attrs:{height:450,content:t.form.content},on:{"update:content":function(e){return t.$set(t.form,"content",e)}}}),t._v(" "),a("SelectEmailTemplate",{attrs:{"show-dialog":t.showDialog1},on:{"handle-select":t.handleSelectEmailTemplate,"update:showDialog":function(e){t.showDialog1=e},"update:show-dialog":function(e){t.showDialog1=e}}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),a("el-button",{attrs:{size:"medium",loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Gửi")])],1)],1)},i=[],r=a("db72"),o=(a("ac6a"),a("5df3"),a("768b")),l=(a("96cf"),a("3b8d")),s=(a("7f7f"),a("b2b3")),c=a("c103"),u=a("a91a"),p=a("64f9"),h=a("3577"),d={props:["showDialog","type","quote"],mixins:[h["a"]],components:{TinyMCE:p["a"],SelectEmailTemplate:u["a"]},watch:{showDialog:function(){if(!this.quote)for(var t in this.form)this.form[t]="";this.form.from_name=this.$store.getters.name,this.emailAddresses.length>0&&(this.form.from_email=this.emailAddresses[0].email)}},data:function(){return{showDialog1:!1,loading:!1,emailAddresses:[],form:{subject:"",from_name:"",from_email:"",content:""},rules:{subject:[{required:!0,message:"Hãy nhập chủ đề",trigger:"blur"}],from_name:[{required:!0,message:"Hãy nhập tên để gửi",trigger:"blur"}],from_email:[{required:!0,message:"Hãy chọn email gửi",trigger:"blur"}]}}},methods:{handleSelectEmailTemplate:function(t){this.form.content=t.content,this.form.subject=t.name},closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},getData:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([Object(c["g"])({list:!0})]);case 3:e=t.sent,a=Object(o["a"])(e,1),n=a[0],this.emailAddresses=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),createData:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:if(this.checkEditor(this.form.content)){t.next=5;break}return t.abrupt("return");case 5:return this.loading=!0,t.next=8,Object(s["b"])(Object(r["a"])({},this.form,{type:this.type,id:this.quote?this.quote.customer_id:this.$route.params.id}));case 8:this.$message.success("Gửi email thành công"),this.$emit("reload"),this.closeDialog(),this.loading=!1,t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),this.loading=!1;case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.quote&&(this.form.content=this.quote.content),this.getData()}},m=d,g=a("2877"),f=Object(g["a"])(m,n,i,!1,null,null,null);e["a"]=f.exports},a567:function(t,e,a){"use strict";var n=a("5091"),i=a.n(n);i.a},a91a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"10vh",title:"Chọn mẫu email",visible:t.showDialog,"before-close":t.closeDialog,width:"30%",center:"","append-to-body":""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{staticClass:"w-100",staticStyle:{width:"25%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"Tìm kiếm theo tên"},model:{value:t.params.code,callback:function(e){t.$set(t.params,"code",e)},expression:"params.code"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.params.page=1,t.getData()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{height:"300px","highlight-current-row":"",data:t.tableData},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"name",label:"Tên"}}),t._v(" "),a("el-table-column",{attrs:{label:"Ngày tạo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.created_at))]}}])})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("e3be"),l=a("333d"),s={props:["showDialog"],components:{Pagination:l["a"]},watch:{showDialog:function(t){t&&this.getData()}},data:function(){return{tableData:[],loading:!1,pagination:{},params:{perPage:10,list:!0,name:""}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["b"])(this.params);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1,this.tableData=[];case 17:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){t&&(this.$emit("handle-select",t),this.closeDialog())}}},c=s,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,"c93d2360",null);e["a"]=p.exports},acfc:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogForm("create")}}},[t._v("Thêm ghi chú")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{form:t.form,"table-data":t.tableData,loading:t.loading},on:{"handle-edit":function(e){return t.showDialogForm("edit")},"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("DialogForm",{attrs:{"show-dialog":t.showDialog,editing:t.editing,form:t.form,type:t.type},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("4ebe"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"65vh",data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"STT"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"Tiêu đề"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"Nội dung"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user",width:"220",label:"Người tạo"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",width:"150",label:"Ngày tạo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.created_at)))]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"150",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"medium",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.handleEdit(e.row)}}}),t._v(" "),a("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}})]}}])})],1)],1)},s=[],c={props:["tableData","loading","form"],methods:{handleEdit:function(t){this.form.id=t.id,this.form.title=t.title,this.form.content=t.content,this.$emit("handle-edit")},handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(o["b"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},u=c,p=a("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",center:"",title:this.editing?"Chỉnh sửa ghi chú":"Thêm ghi chú","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"Tiêu đề",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Nội dung",prop:"content"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),t.editing?a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.updateData}},[t._v("Cập nhật")]):a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.createData}},[t._v("Tạo mới")])],1)],1)},g=[],f={props:["form","editing","showDialog","type"],data:function(){return{loading:!1,rules:{title:[{required:!0,message:"Hãy nhập tiêu đề",trigger:"blur"}],content:[{required:!0,message:"Hãy nhập nội dung",trigger:"blur"}]},addDataFunc:""}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1),this.$refs["form"].resetFields()},updateData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(o["e"])(this.form,this.form.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),createData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,Object(o["a"])(this.form,this.type,this.$route.params.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success(this.editing?"Cập nhật thành công":"Thêm mới thành công"),this.closeDialog(),this.$emit("reload")}}},b=f,v=Object(p["a"])(b,m,g,!1,null,null,null),_=v.exports,w=a("333d"),y={components:{TableData:d,DialogForm:_,Pagination:w["a"]},props:["type"],data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},params:{perPage:10,page:1},showDialog:!1,editing:!1,form:{id:"",title:"",content:""}}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["c"])(this.params,this.type,this.$route.params.id);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,this.$emit("handle-load",n.total),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogForm:function(t){if("edit"==t)this.editing=!0;else{for(var e in this.form)this.form[e]="";this.editing=!1}this.showDialog=!0}},created:function(){this.getData()}},D=y,x=Object(p["a"])(D,n,i,!1,null,null,null);e["a"]=x.exports},bb4d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){return t.showDialogUpload()}}},[t._v("Tải lên")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{"table-data":t.tableData,loading:t.loading},on:{"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("DialogUpload",{attrs:{"show-dialog":t.showDialog,type:t.type},on:{reload:function(e){return t.getData()},"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("92de"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"65vh",data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"STT"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"Tên tệp"}}),t._v(" "),a("el-table-column",{attrs:{prop:"size",width:"150",label:"Dung lượng"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user",width:"220",label:"Người tạo"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",width:"200",label:"Ngày tạo"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"150",label:"Hành động"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDelete(e.row.id)}}}),t._v(" "),a("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-download",circle:""},on:{click:function(a){return t.download(e.row.name)}}})]}}])})],1)},s=[],c=(a("bc3a"),{props:["tableData","loading"],data:function(){return{}},methods:{handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(o["a"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),download:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.openFullScreen(),t.next=3,Object(o["b"])({name:e});case 3:a=t.sent,this.closeFullScreen(),n=window.URL.createObjectURL(new Blob([a])),i=document.createElement("a"),i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),this.$message.success("Tải file thành công");case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}),u=c,p=a("2877"),h=Object(p["a"])(u,l,s,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:"30%",center:"",title:"Tải lên","before-close":t.closeDialog,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-upload",{ref:"upload",staticStyle:{"text-align":"center"},attrs:{headers:{Authorization:"Bearer "+t.$store.getters.token},drag:"","auto-upload":!1,"on-change":t.handleChange,action:t.action,"file-list":t.fileList,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n            Kéo tệp vào đây hoặc\n            "),a("em",[t._v("ấn để upload")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeDialog}},[t._v("Hủy")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitUpload}},[t._v("Cập nhật")])],1)],1)},g=[],f=(a("20d6"),{props:["showDialog","type"],data:function(){return{loading:!1,fileList:[],addDataFunc:"",action:""}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1),this.fileList=[]},addFileByType:function(){this.action="".concat("https://adcrm.herokuapp.com/api/","files/").concat(this.type,"/").concat(this.$route.params.id)},createData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:return this.loading=!0,t.next=6,this.addDataFunc(this.form,this.$route.params.id);case 6:this.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),reload:function(){this.loading=!1,this.$message.success("Tải file lên thành công"),this.closeDialog(),this.$emit("reload")},handleChange:function(t,e){-1==e.findIndex((function(t){return"ready"==t.status}))&&this.reload()},submitUpload:function(){this.loading=!0,this.$refs.upload.submit()}},created:function(){this.addFileByType()}}),b=f,v=Object(p["a"])(b,m,g,!1,null,null,null),_=v.exports,w=a("333d"),y={components:{TableData:d,DialogUpload:_,Pagination:w["a"]},props:["type"],data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},params:{perPage:10,page:1},showDialog:!1}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["c"])(this.params,this.type,this.$route.params.id);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,this.$emit("handle-load",n.total),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](0);case 15:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),showDialogUpload:function(){this.showDialog=!0}},created:function(){this.getData()}},D=y,x=Object(p["a"])(D,n,i,!1,null,null,null);e["a"]=x.exports},bc09:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",[a("div",{staticStyle:{"text-align":"center",height:"18.4px"},attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.name))]),t._v(" "),t.field?a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left",rules:t.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"Tên",prop:"last_name"}},[a("el-input",{attrs:{placeholder:"Nhập tên của bạn"},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1),t._v(" "),t.field.phone_number?a("el-form-item",{attrs:{label:"Số điện thoại",prop:"phone_number"}},[a("el-input",{attrs:{placeholder:"Nhập số điện thoại"},model:{value:t.form.phone_number,callback:function(e){t.$set(t.form,"phone_number",e)},expression:"form.phone_number"}})],1):t._e(),t._v(" "),t.field.mobile_number?a("el-form-item",{attrs:{label:"Số di động",prop:"mobile_number"}},[a("el-input",{attrs:{placeholder:"Nhập số di động"},model:{value:t.form.mobile_number,callback:function(e){t.$set(t.form,"mobile_number",e)},expression:"form.mobile_number"}})],1):t._e(),t._v(" "),t.field.email?a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1):t._e(),t._v(" "),t.field.company?a("el-form-item",{attrs:{label:"Công ty",prop:"company"}},[a("el-input",{attrs:{placeholder:"Nhập tên công ty"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}})],1):t._e(),t._v(" "),t.field.office_address?a("el-form-item",{attrs:{label:"Địa chỉ",prop:"office_address"}},[a("el-input",{attrs:{placeholder:"Nhập địa chỉ công ty"},model:{value:t.form.office_address,callback:function(e){t.$set(t.form,"office_address",e)},expression:"form.office_address"}})],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.createLead(e)}}},[t._v("Đăng ký")])],1)],1):t._e()],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("61f7"),l=a("e68e"),s={props:["field","name","demo"],data:function(){return{form:{name:"",email:"",phone_number:"",mobile_number:"",company:"",office_address:""},rules:{last_name:[{required:!0,message:"Bắt buộc nhập",trigger:"blur"}],email:[{type:"email",message:"Bạn hãy nhập một địa chỉ email",trigger:"blur"}],phone_number:[{validator:o["e"],trigger:"blur"}],mobile_number:[{validator:o["d"],trigger:"blur"}]}}},methods:{createLead:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$refs["form"].validate();case 3:if(!this.demo){t.next=5;break}return t.abrupt("return");case 5:return this.openFullScreen(),t.next=8,Object(l["a"])(this.form,this.$route.query.id);case 8:this.closeFullScreen(),this.$refs["form"].resetFields(),this.$message.success("Cảm ơn bạn đã đăng ki"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){for(var t in this.field)"company"==t||"office_address"==t?this.rules[t]=[{required:!0,message:"Bắt buộc nhập",trigger:"blur"}]:this.rules[t].push({required:!0,message:"Bắt buộc nhập",trigger:"blur"})}},c=s,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,null,null);e["a"]=p.exports},ccd6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.dynamicTags.length?a("i",{staticClass:"el-icon-price-tag tag-icon"}):t._e(),t._v(" "),t._l(t.dynamicTags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v(t._s(e))])})),t._v(" "),t.inputVisible?[a("el-select",{staticClass:"input-new-tag",attrs:{size:"small",multiple:"",filterable:"",remote:"","reserve-keyword":"","remote-method":t.remoteMethod,"allow-create":"",placeholder:"Chọn tag",loading:t.loading},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}},t._l(t.options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-check",size:"small",type:"success",circle:""},on:{click:t.changeTags}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-close",size:"small",type:"danger",circle:""},on:{click:t.resetInput}})]:a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-plus",type:"primary",size:"small",circle:""},on:{click:function(e){t.inputVisible=!0}}})],2)},i=[],r=(a("7f7f"),a("96cf"),a("3b8d")),o=a("0baa"),l={props:["type"],data:function(){return{options:[],dynamicTags:[],inputVisible:!1,inputValue:"",loading:!1}},methods:{getTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o["c"])(this.type,this.$route.params.id);case 3:e=t.sent,a=e.data,this.dynamicTags=a.map((function(t){return t.name})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),handleClose:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$confirm("Bạn có muốn xóa tag này","Xác nhận xóa");case 3:return this.openFullScreen(),t.next=6,Object(o["b"])({tags:[e],objects:[this.$route.params.id]},this.type);case 6:this.dynamicTags.splice(this.dynamicTags.indexOf(e),1),this.closeFullScreen(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}(),changeTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.openFullScreen(),t.next=4,Object(o["a"])({tags:this.inputValue,objects:[this.$route.params.id]},this.type);case 4:return t.next=6,this.getTags();case 6:this.closeFullScreen(),this.resetInput(),this.$message.success("Thêm tag thành công"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),this.closeFullScreen();case 15:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}(),resetInput:function(){this.inputVisible=!1,this.inputValue=[]},remoteMethod:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e){t.next=10;break}return this.loading=!0,t.next=4,Object(o["d"])(this.type,e);case 4:a=t.sent,n=a.data,this.options=n,this.loading=!1,t.next=11;break;case 10:this.options=[];case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.getTags()}},s=l,c=(a("6e67"),a("2877")),u=Object(c["a"])(s,n,i,!1,null,null,null);e["a"]=u.exports},cde5:function(t,e,a){},d1cd:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"Chọn sản phẩm",visible:t.showDialog,"before-close":t.closeDialog,width:"75%",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{staticStyle:{width:"25%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"Tìm kiếm theo tên"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.params.page=1,t.getData()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:t.tableData},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{width:"250",label:"Hình ảnh"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.image?a("el-avatar",{attrs:{fit:"fill",size:50,src:e.row.image.path}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",width:"300",label:"Tên"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"Mã"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"Giá bán(đ)"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("money")(e.row.sale_price)))]}}])})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("bc50"),l=a("333d"),s={props:["showDialog"],components:{Pagination:l["a"]},watch:{showDialog:function(t){t&&this.getData()}},data:function(){return{tableData:[],loading:!1,pagination:{},name:"",params:{name:"",perPage:10,page:""}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["a"])(this.params);case 4:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){t&&(this.$emit("select-product",t),this.closeDialog())}}},c=s,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,"708b2bf7",null);e["a"]=p.exports},de6b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"mb-20"},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{circle:"",size:"medium",type:"primary",icon:"el-icon-refresh"},on:{click:t.getData}}),t._v(" "),a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:function(e){t.showDialog=!0}}},[t._v("Gửi email")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("TableData",{attrs:{"table-data":t.tableData,loading:t.loading,recipient:t.recipient},on:{"handle-delete":function(e){return t.getData()},"update:loading":function(e){t.loading=e}}})],1)],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}}),t._v(" "),a("SendingEmail",{attrs:{"show-dialog":t.showDialog,type:t.type},on:{reload:t.getData,"update:showDialog":function(e){t.showDialog=e},"update:show-dialog":function(e){t.showDialog=e}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("b2b3"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{height:"65vh",data:t.tableData,border:""}},[a("el-table-column",{attrs:{width:"280",prop:"subject",label:"Tiêu đề"}}),t._v(" "),a("el-table-column",{attrs:{label:"Chiến dịch"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.campaign?a("router-link",{staticClass:"link",attrs:{tag:"a",to:"/accounting/invoice/show/"+e.row.campaign.id}},[t._v(t._s(e.row.campaign.name))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"from_email",width:"230",label:"Email gửi"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",width:"150",label:"Ngày gửi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.created_at)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",width:"120",label:"Trạng thái"}}),t._v(" "),a("el-table-column",{attrs:{prop:"opened",width:"80",align:"center",label:"Mở"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.opened?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#2ecc71"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#e74c3c"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"clicked",width:"80",align:"center",label:"Click"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.clicked?a("i",{staticClass:"el-icon-check",staticStyle:{color:"#2ecc71"}}):a("i",{staticClass:"el-icon-close",staticStyle:{color:"#e74c3c"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",width:"80",label:"Xem"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"success",circle:"",icon:"el-icon-view"},on:{click:function(a){return t.openPreview(e.row)}}})]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.email.subject,visible:t.showDialog,top:"5vh",width:"80%"},on:{"update:visible":function(e){t.showDialog=e}}},[a("p",[t._v("Từ: "+t._s(t.email.from_name)+" <"+t._s(t.email.from_email)+">")]),t._v(" "),a("p",[t._v("Tới: "+t._s(t.recipient.name)+" <"+t._s(t.recipient.email)+">")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.email.content)}})])],1)},s=[],c=a("92de"),u=(a("bc3a"),{props:["tableData","loading","recipient"],data:function(){return{showDialog:!1,email:""}},methods:{openPreview:function(t){this.email=t,this.showDialog=!0},handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("Bạn có chắc chắn muốn xóa?","Cảnh báo",{confirmButtonText:"Xóa",cancelButtonText:"Hủy",type:"warning"});case 2:return this.openFullScreen(),t.next=5,Object(c["a"])(e);case 5:this.closeFullScreen(),this.$message.success("Xóa dữ liệu thành công"),this.$emit("handle-delete");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),download:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.openFullScreen(),t.next=3,Object(c["b"])({name:e});case 3:a=t.sent,this.closeFullScreen(),n=window.URL.createObjectURL(new Blob([a])),i=document.createElement("a"),i.href=n,i.setAttribute("download",e),document.body.appendChild(i),i.click(),this.$message.success("Tải file thành công");case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}),p=u,h=a("2877"),d=Object(h["a"])(p,l,s,!1,null,null,null),m=d.exports,g=a("333d"),f=a("7d3d"),b={components:{TableData:m,Pagination:g["a"],SendingEmail:f["a"]},props:["type"],data:function(){var t=this.type,e=this.$route.params.id;return{tableData:[],loading:!1,pagination:{},recipient:"",params:{perPage:10,page:1,type:t,id:e},showDialog:!1}},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,Object(o["a"])(this.params);case 4:e=t.sent,a=e.data,n=e.meta,i=e.recipient,this.tableData=a,this.pagination=n,this.recipient=i,this.loading=!1,this.$emit("handle-load",n.total),t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](0);case 17:case"end":return t.stop()}}),t,this,[[0,15]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getData()}},v=b,_=Object(h["a"])(v,n,i,!1,null,null,null);e["a"]=_.exports},e875:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",title:"Chọn cơ hội",visible:t.showDialog,"before-close":t.closeDialog,width:"75%",center:"","append-to-body":""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{staticStyle:{width:"25%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"Tìm kiếm theo tên"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.params.page=1,t.getData()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{height:"400px","highlight-current-row":"",data:t.tableData},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"name",label:"Tên"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"Ngày tạo"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("datetime")(e.row.created_at)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"Ngày kết thúc"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("date")(e.row.end_date)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"customer",label:"Khách hàng"}})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("856f"),l=a("333d"),s={props:["showDialog","customer"],components:{Pagination:l["a"]},watch:{showDialog:function(t){t&&this.getData()}},data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},params:{name:"",perPage:10,list:!0}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,this.params.customer=this.customer,t.next=5,Object(o["d"])(this.params);case 5:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1,this.tableData=[];case 18:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){t&&(this.$emit("handle-select",t),this.closeDialog())}}},c=s,u=a("2877"),p=Object(u["a"])(c,n,i,!1,null,"353c8017",null);e["a"]=p.exports},f201d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{top:"0",title:"order"==t.type?"Chọn đơn hàng":"Chọn báo giá",visible:t.showDialog,"before-close":t.closeDialog,width:"60%",center:""},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-input",{staticStyle:{width:"25%"},attrs:{"prefix-icon":"el-icon-search",size:"small",placeholder:"Tìm kiếm theo mã"},model:{value:t.params.code,callback:function(e){t.$set(t.params,"code",e)},expression:"params.code"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.params.page=1,t.getData()}},slot:"append"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{height:"400px","highlight-current-row":"",data:t.tableData},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"code",label:"Mã"}}),t._v(" "),a("el-table-column",{attrs:{prop:"customer",label:"Khách hàng"}})],1),t._v(" "),a("Pagination",{attrs:{pagination:t.pagination},on:{"size-change":function(e){t.params.perPage=e,t.params.page=1,t.getData()},"current-change":function(e){t.params.page=e,t.getData()}}})],1)},i=[],r=(a("96cf"),a("3b8d")),o=a("b946"),l=a("a9e6"),s=a("333d"),c={props:["showDialog","customer","type"],components:{Pagination:s["a"]},watch:{showDialog:function(t){t&&this.getData()}},data:function(){return{tableData:[],loading:!1,getDataFunc:"",pagination:{},params:{code:"",perPage:10,list:!0}}},methods:{closeDialog:function(){this.$emit("update:showDialog",!1)},getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,this.params.customer=this.customer,"order"==this.type?this.getDataFunc=o["b"]:this.getDataFunc=l["c"],t.next=6,this.getDataFunc(this.params);case 6:e=t.sent,a=e.data,n=e.meta,this.tableData=a,this.pagination=n,this.loading=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0),this.loading=!1,this.tableData=[];case 19:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}(),handleCurrentChange:function(t){t&&(this.$emit("handle-select",t),this.closeDialog())}}},u=c,p=a("2877"),h=Object(p["a"])(u,n,i,!1,null,"5e2e487a",null);e["a"]=h.exports}}]);